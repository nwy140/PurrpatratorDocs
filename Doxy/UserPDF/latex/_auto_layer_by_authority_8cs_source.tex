\doxysection{Auto\+Layer\+By\+Authority.\+cs}
\label{_auto_layer_by_authority_8cs_source}\index{C:/\_SSDSPEEDUP/2021/GPS/gps2\_purrpatrator/GPS2\_Purrpatrator/Assets/Photon/Simple/Utilities/Networking/AutoLayerByAuthority.cs@{C:/\_SSDSPEEDUP/2021/GPS/gps2\_purrpatrator/GPS2\_Purrpatrator/Assets/Photon/Simple/Utilities/Networking/AutoLayerByAuthority.cs}}
\textbf{ Go to the documentation of this file.}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001 \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00002 \textcolor{comment}{// <copyright>PhotonNetwork Framework for Unity -\/ Copyright (C) 2020 Exit Games GmbH</copyright>}}
\DoxyCodeLine{00003 \textcolor{comment}{// <author>developer@exitgames.com</author>}}
\DoxyCodeLine{00004 \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00005 }
\DoxyCodeLine{00006 \textcolor{keyword}{using} UnityEngine;}
\DoxyCodeLine{00007 }
\DoxyCodeLine{00008 \textcolor{keyword}{namespace }Photon.Pun.Simple}
\DoxyCodeLine{00009 \{}
\DoxyCodeLine{00010 }
\DoxyCodeLine{00011     \textcolor{keyword}{public} \textcolor{keyword}{class }AutoLayerByAuthority : MonoBehaviour}
\DoxyCodeLine{00012     \{}
\DoxyCodeLine{00013         \textcolor{comment}{//[EnumMask]}}
\DoxyCodeLine{00014         \textcolor{keyword}{public} \textcolor{keywordtype}{int} authorityLayer = 8;}
\DoxyCodeLine{00015 }
\DoxyCodeLine{00016         \textcolor{comment}{//[EnumMask]}}
\DoxyCodeLine{00017         \textcolor{keyword}{public} \textcolor{keywordtype}{int} nonAuthorityLayer = 9;}
\DoxyCodeLine{00018 }
\DoxyCodeLine{00019         \textcolor{keyword}{public} \textcolor{keywordtype}{int} projectileLayer = 10;}
\DoxyCodeLine{00020 }
\DoxyCodeLine{00021         \textcolor{keyword}{public} \textcolor{keywordtype}{bool} applyToChildren = \textcolor{keyword}{true};}
\DoxyCodeLine{00022 }
\DoxyCodeLine{00023         \textcolor{comment}{// Use this for initialization}}
\DoxyCodeLine{00024 }
\DoxyCodeLine{00025         \textcolor{keyword}{private} \textcolor{keywordtype}{void} Awake()}
\DoxyCodeLine{00026         \{}
\DoxyCodeLine{00027             Physics.IgnoreLayerCollision(authorityLayer, projectileLayer);}
\DoxyCodeLine{00028 }
\DoxyCodeLine{00030             \textcolor{keywordflow}{if} (applyToChildren)}
\DoxyCodeLine{00031                 SetChildrenLayer(transform, projectileLayer);}
\DoxyCodeLine{00032             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00033                 gameObject.layer = projectileLayer;}
\DoxyCodeLine{00034         \}}
\DoxyCodeLine{00035 }
\DoxyCodeLine{00036         \textcolor{keyword}{public} \textcolor{keywordtype}{void} OnChangeAuthority(\textcolor{keywordtype}{bool} IsMine, \textcolor{keywordtype}{bool} serverIsActive)}
\DoxyCodeLine{00037         \{}
\DoxyCodeLine{00038             Debug.Log(\textcolor{stringliteral}{"{}Auth change "{}} + name);}
\DoxyCodeLine{00039             \textcolor{keywordtype}{int} layer = IsMine ? authorityLayer : nonAuthorityLayer;}
\DoxyCodeLine{00040 }
\DoxyCodeLine{00041             \textcolor{keywordflow}{if} (applyToChildren)}
\DoxyCodeLine{00042                 SetChildrenLayer(transform, layer);}
\DoxyCodeLine{00043             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00044                 gameObject.layer = layer;}
\DoxyCodeLine{00045         \}}
\DoxyCodeLine{00046 }
\DoxyCodeLine{00047         \textcolor{keyword}{public} \textcolor{keywordtype}{void} SetChildrenLayer(Transform t, \textcolor{keywordtype}{int} layer)}
\DoxyCodeLine{00048         \{}
\DoxyCodeLine{00049             t.gameObject.layer = layer;}
\DoxyCodeLine{00050 }
\DoxyCodeLine{00051             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < t.childCount; ++i)}
\DoxyCodeLine{00052             \{}
\DoxyCodeLine{00053                 Transform child = t.GetChild(i);}
\DoxyCodeLine{00054                 \textcolor{keywordflow}{if} (child.GetComponent<AutoLayerByAuthority>())}
\DoxyCodeLine{00055                     \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00056 }
\DoxyCodeLine{00057                 SetChildrenLayer(t.GetChild(i), layer);}
\DoxyCodeLine{00058             \}}
\DoxyCodeLine{00059         \}}
\DoxyCodeLine{00060 }
\DoxyCodeLine{00061     \}}
\DoxyCodeLine{00062 }
\DoxyCodeLine{00063 \}}

\end{DoxyCode}
