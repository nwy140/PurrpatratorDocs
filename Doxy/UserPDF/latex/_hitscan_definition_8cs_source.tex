\doxysection{Hitscan\+Definition.\+cs}
\label{_hitscan_definition_8cs_source}\index{C:/\_SSDSPEEDUP/2021/GPS/gps2\_purrpatrator/GPS2\_Purrpatrator/Assets/Photon/Simple/Core/GenericHitscan/HitscanDefinition.cs@{C:/\_SSDSPEEDUP/2021/GPS/gps2\_purrpatrator/GPS2\_Purrpatrator/Assets/Photon/Simple/Core/GenericHitscan/HitscanDefinition.cs}}
\textbf{ Go to the documentation of this file.}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001 \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00002 \textcolor{comment}{// <copyright>PhotonNetwork Framework for Unity -\/ Copyright (C) 2020 Exit Games GmbH</copyright>}}
\DoxyCodeLine{00003 \textcolor{comment}{// <author>developer@exitgames.com</author>}}
\DoxyCodeLine{00004 \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00005 }
\DoxyCodeLine{00006 \textcolor{keyword}{using} UnityEngine;}
\DoxyCodeLine{00007 }
\DoxyCodeLine{00008 \textcolor{preprocessor}{\#if UNITY\_EDITOR}}
\DoxyCodeLine{00009 \textcolor{keyword}{using} UnityEditor;}
\DoxyCodeLine{00010 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00011 }
\DoxyCodeLine{00012 \textcolor{keyword}{namespace }Photon.Pun.Simple}
\DoxyCodeLine{00013 \{}
\DoxyCodeLine{00014     \textcolor{keyword}{public} \textcolor{keyword}{enum} Replicate \{ None, CastOnly, Hits, HitsWithContactGroups \}}
\DoxyCodeLine{00015 }
\DoxyCodeLine{00019     [System.Serializable]}
\DoxyCodeLine{00020     \textcolor{keyword}{public} \textcolor{keyword}{class }HitscanDefinition}
\DoxyCodeLine{00021     \{}
\DoxyCodeLine{00022 }
\DoxyCodeLine{00023         \textcolor{keyword}{public} Replicate ownerToAuthority = Replicate.Hits;}
\DoxyCodeLine{00024         \textcolor{keyword}{public} Replicate authorityToAll = Replicate.Hits;}
\DoxyCodeLine{00025 }
\DoxyCodeLine{00026         [Tooltip(\textcolor{stringliteral}{"{}This cast/overlap test will be done on the initiating client against colliders on these layers. "{}} +}
\DoxyCodeLine{00027             \textcolor{stringliteral}{"{}Exclude layers that won't include any objects that you don't want to test (such as walls)."{}})]}
\DoxyCodeLine{00028         \textcolor{keyword}{public} LayerMask layerMask = -\/1;}
\DoxyCodeLine{00029         \textcolor{keyword}{public} \textcolor{keywordtype}{bool} useOffset;}
\DoxyCodeLine{00030         \textcolor{keyword}{public} Vector3 offset1 = \textcolor{keyword}{new} Vector3(0, 0, 0); \textcolor{comment}{// Used offset and first sphere of capsule}}
\DoxyCodeLine{00031         \textcolor{keyword}{public} Vector3 offset2 = \textcolor{keyword}{new} Vector3(0, 1, 0); \textcolor{comment}{// Used for second sphere of capsule}}
\DoxyCodeLine{00032         \textcolor{keyword}{public} Vector3 halfExtents = \textcolor{keyword}{new} Vector3(1, 1, 1);}
\DoxyCodeLine{00033         \textcolor{keyword}{public} Vector3 orientation = \textcolor{keyword}{new} Vector3(0, 0, 0);}
\DoxyCodeLine{00034         \textcolor{keyword}{public} HitscanType hitscanType = HitscanType.Raycast;}
\DoxyCodeLine{00035         \textcolor{keyword}{public} \textcolor{keywordtype}{float} distance = 100f;}
\DoxyCodeLine{00036         \textcolor{keyword}{public} \textcolor{keywordtype}{float} radius = 1;}
\DoxyCodeLine{00037         \textcolor{keyword}{public} \textcolor{keywordtype}{bool} nearestOnly = \textcolor{keyword}{true};}
\DoxyCodeLine{00038         \textcolor{comment}{//public bool NearestOnly}}
\DoxyCodeLine{00039         \textcolor{comment}{//\{}}
\DoxyCodeLine{00040         \textcolor{comment}{//  set \{ nearestOnly = value; \}}}
\DoxyCodeLine{00041         \textcolor{comment}{//  get}}
\DoxyCodeLine{00042         \textcolor{comment}{//  \{}}
\DoxyCodeLine{00043         \textcolor{comment}{//      if (hitscanType.IsOverlap())}}
\DoxyCodeLine{00044         \textcolor{comment}{//          return false;}}
\DoxyCodeLine{00045         \textcolor{comment}{//      else}}
\DoxyCodeLine{00046         \textcolor{comment}{//          return nearestOnly;}}
\DoxyCodeLine{00047         \textcolor{comment}{//  \}}}
\DoxyCodeLine{00048         \textcolor{comment}{//\}}}
\DoxyCodeLine{00049 }
\DoxyCodeLine{00050     \}}
\DoxyCodeLine{00051 }
\DoxyCodeLine{00052 }
\DoxyCodeLine{00053 \textcolor{preprocessor}{\#if UNITY\_EDITOR}}
\DoxyCodeLine{00054 }
\DoxyCodeLine{00055     [CustomPropertyDrawer(typeof(HitscanDefinition))]}
\DoxyCodeLine{00056     \textcolor{keyword}{public} \textcolor{keyword}{class }HitscanDefinitionDrawer : PropertyDrawer}
\DoxyCodeLine{00057     \{}
\DoxyCodeLine{00058         \textcolor{keyword}{public} \textcolor{keyword}{static} GUIStyle lefttextstyle = \textcolor{keyword}{new} GUIStyle}
\DoxyCodeLine{00059         \{}
\DoxyCodeLine{00060             alignment = TextAnchor.UpperLeft,}
\DoxyCodeLine{00061             richText = \textcolor{keyword}{true}}
\DoxyCodeLine{00062         \};}
\DoxyCodeLine{00063 }
\DoxyCodeLine{00064         \textcolor{keyword}{private} \textcolor{keyword}{const} \textcolor{keywordtype}{float} PAD = 4;}
\DoxyCodeLine{00065         \textcolor{keyword}{private} \textcolor{keyword}{const} \textcolor{keywordtype}{float} SPACING = 18;}
\DoxyCodeLine{00066         \textcolor{keyword}{private} \textcolor{keyword}{const} \textcolor{keywordtype}{float} FLDHGHT = 18;}
\DoxyCodeLine{00067 }
\DoxyCodeLine{00068         \textcolor{keyword}{public} \textcolor{keyword}{override} \textcolor{keywordtype}{void} OnGUI(Rect r, SerializedProperty \_property, GUIContent \_label)}
\DoxyCodeLine{00069         \{}
\DoxyCodeLine{00070             r.yMax -\/= 6;}
\DoxyCodeLine{00071             \textcolor{comment}{// Draw leading black separator}}
\DoxyCodeLine{00072             r.yMin += 2;}
\DoxyCodeLine{00073             EditorGUI.DrawRect(\textcolor{keyword}{new} Rect(r) \{ height = 2 \}, \textcolor{keyword}{new} Color(.15f, .15f, .15f));}
\DoxyCodeLine{00074             r.yMin += 4;}
\DoxyCodeLine{00075 }
\DoxyCodeLine{00076             EditorGUI.BeginProperty(r, GUIContent.none, \_property);}
\DoxyCodeLine{00077 }
\DoxyCodeLine{00078             \textcolor{keywordtype}{int} startingIndent = EditorGUI.indentLevel;}
\DoxyCodeLine{00079 }
\DoxyCodeLine{00080             SerializedProperty layerMask = \_property.FindPropertyRelative(\textcolor{stringliteral}{"{}layerMask"{}});}
\DoxyCodeLine{00081 }
\DoxyCodeLine{00082             SerializedProperty useOffset = \_property.FindPropertyRelative(\textcolor{stringliteral}{"{}useOffset"{}});}
\DoxyCodeLine{00083             SerializedProperty offset1 = \_property.FindPropertyRelative(\textcolor{stringliteral}{"{}offset1"{}});}
\DoxyCodeLine{00084             SerializedProperty offset2 = \_property.FindPropertyRelative(\textcolor{stringliteral}{"{}offset2"{}});}
\DoxyCodeLine{00085             SerializedProperty hitscanType = \_property.FindPropertyRelative(\textcolor{stringliteral}{"{}hitscanType"{}});}
\DoxyCodeLine{00086             SerializedProperty distance = \_property.FindPropertyRelative(\textcolor{stringliteral}{"{}distance"{}});}
\DoxyCodeLine{00087             SerializedProperty radius = \_property.FindPropertyRelative(\textcolor{stringliteral}{"{}radius"{}});}
\DoxyCodeLine{00088 }
\DoxyCodeLine{00089             SerializedProperty halfExtents = \_property.FindPropertyRelative(\textcolor{stringliteral}{"{}halfExtents"{}});}
\DoxyCodeLine{00090             SerializedProperty orientation = \_property.FindPropertyRelative(\textcolor{stringliteral}{"{}orientation"{}});}
\DoxyCodeLine{00091 }
\DoxyCodeLine{00092             SerializedProperty nearestOnly = \_property.FindPropertyRelative(\textcolor{stringliteral}{"{}nearestOnly"{}});}
\DoxyCodeLine{00093 }
\DoxyCodeLine{00094             HitscanType hitscantype = (HitscanType)hitscanType.intValue;}
\DoxyCodeLine{00095 }
\DoxyCodeLine{00096             EditorGUI.LabelField(\textcolor{keyword}{new} Rect(r) \{ height = FLDHGHT \}, \_label);}
\DoxyCodeLine{00097             r.yMin += SPACING;}
\DoxyCodeLine{00098 }
\DoxyCodeLine{00099             GUI.Box(r, GUIContent.none, (GUIStyle)\textcolor{stringliteral}{"{}HelpBox"{}});}
\DoxyCodeLine{00100 }
\DoxyCodeLine{00101             r.xMin += PAD;}
\DoxyCodeLine{00102             r.xMax -\/= PAD;}
\DoxyCodeLine{00103             r.height = FLDHGHT;}
\DoxyCodeLine{00104 }
\DoxyCodeLine{00105             r.y += PAD;}
\DoxyCodeLine{00106 }
\DoxyCodeLine{00107             EditorGUI.BeginChangeCheck();}
\DoxyCodeLine{00108 }
\DoxyCodeLine{00109             EditorGUI.PropertyField(r, hitscanType);}
\DoxyCodeLine{00110 }
\DoxyCodeLine{00111             r.y += SPACING;}
\DoxyCodeLine{00112             EditorGUI.PropertyField(r, layerMask);}
\DoxyCodeLine{00113 }
\DoxyCodeLine{00114             \textcolor{comment}{// Show dist for any of the casts}}
\DoxyCodeLine{00115             \textcolor{keywordflow}{if} (hitscantype.IsCast())}
\DoxyCodeLine{00116             \{}
\DoxyCodeLine{00117                 r.y += SPACING;}
\DoxyCodeLine{00118                 EditorGUI.PropertyField(r, distance);}
\DoxyCodeLine{00119             \}}
\DoxyCodeLine{00120 }
\DoxyCodeLine{00121             r.y += SPACING;}
\DoxyCodeLine{00122             EditorGUI.PropertyField(r, nearestOnly);}
\DoxyCodeLine{00123 }
\DoxyCodeLine{00124             \textcolor{comment}{// Radius types}}
\DoxyCodeLine{00125             \textcolor{keywordflow}{if} (hitscantype.UsesRadius())}
\DoxyCodeLine{00126             \{}
\DoxyCodeLine{00127                 r.y += SPACING;}
\DoxyCodeLine{00128                 EditorGUI.PropertyField(r, radius);}
\DoxyCodeLine{00129             \}}
\DoxyCodeLine{00130 }
\DoxyCodeLine{00131             \textcolor{comment}{// Offset (all but capsule)}}
\DoxyCodeLine{00132             \textcolor{keywordflow}{if} (!hitscantype.IsCapsule())}
\DoxyCodeLine{00133             \{}
\DoxyCodeLine{00134                 r.y += SPACING;}
\DoxyCodeLine{00135                 EditorGUI.LabelField(\textcolor{keyword}{new} Rect(r.xMin + 18, r.y, 100, FLDHGHT), \textcolor{keyword}{new} GUIContent(\textcolor{stringliteral}{"{}Offset"{}}));}
\DoxyCodeLine{00136                 EditorGUI.PropertyField(\textcolor{keyword}{new} Rect(r.xMin, r.y, 32, FLDHGHT), useOffset, GUIContent.none);}
\DoxyCodeLine{00137 }
\DoxyCodeLine{00138                 \textcolor{keywordflow}{if} (useOffset.boolValue)}
\DoxyCodeLine{00139                     EditorGUI.PropertyField(\textcolor{keyword}{new} Rect(r.xMin + 100, r.y, r.width -\/ 100, FLDHGHT), offset1, GUIContent.none);}
\DoxyCodeLine{00140 }
\DoxyCodeLine{00141             \}}
\DoxyCodeLine{00142 }
\DoxyCodeLine{00143             \textcolor{comment}{// Show Point1 and Point2 for capsule.}}
\DoxyCodeLine{00144             \textcolor{keywordflow}{if} (hitscantype.IsCapsule())}
\DoxyCodeLine{00145             \{}
\DoxyCodeLine{00146                 r.y += SPACING;}
\DoxyCodeLine{00147                 EditorGUI.LabelField(\textcolor{keyword}{new} Rect(r.xMin, r.y, 100, FLDHGHT), \textcolor{keyword}{new} GUIContent(\textcolor{stringliteral}{"{}Offset1:"{}}));}
\DoxyCodeLine{00148                 EditorGUI.PropertyField(\textcolor{keyword}{new} Rect(r.xMin + 100, r.y, r.width -\/ 100, FLDHGHT), offset1, GUIContent.none);}
\DoxyCodeLine{00149 }
\DoxyCodeLine{00150                 r.y += SPACING;}
\DoxyCodeLine{00151                 EditorGUI.LabelField(\textcolor{keyword}{new} Rect(r.xMin, r.y, 100, FLDHGHT), \textcolor{keyword}{new} GUIContent(\textcolor{stringliteral}{"{}Offset2:"{}}));}
\DoxyCodeLine{00152                 EditorGUI.PropertyField(\textcolor{keyword}{new} Rect(r.xMin + 100, r.y, r.width -\/ 100, FLDHGHT), offset2, GUIContent.none);}
\DoxyCodeLine{00153 }
\DoxyCodeLine{00154             \}}
\DoxyCodeLine{00155             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (hitscantype.IsBox())}
\DoxyCodeLine{00156             \{}
\DoxyCodeLine{00157                 r.y += SPACING;}
\DoxyCodeLine{00158                 EditorGUI.LabelField(\textcolor{keyword}{new} Rect(r.xMin, r.y, 100, FLDHGHT), \textcolor{keyword}{new} GUIContent(\textcolor{stringliteral}{"{}Half Extents:"{}}));}
\DoxyCodeLine{00159                 EditorGUI.PropertyField(\textcolor{keyword}{new} Rect(r.xMin + 100, r.y, r.width -\/ 100, FLDHGHT), halfExtents, GUIContent.none);}
\DoxyCodeLine{00160 }
\DoxyCodeLine{00161                 r.y += SPACING;}
\DoxyCodeLine{00162                 EditorGUI.LabelField(\textcolor{keyword}{new} Rect(r.xMin, r.y, 100, FLDHGHT), \textcolor{keyword}{new} GUIContent(\textcolor{stringliteral}{"{}Orientation:"{}}));}
\DoxyCodeLine{00163                 EditorGUI.PropertyField(\textcolor{keyword}{new} Rect(r.xMin + 100, r.y, r.width -\/ 100, FLDHGHT), orientation, GUIContent.none);}
\DoxyCodeLine{00164 }
\DoxyCodeLine{00165             \}}
\DoxyCodeLine{00166 }
\DoxyCodeLine{00168             \textcolor{keywordtype}{bool} haschanged = EditorGUI.EndChangeCheck();}
\DoxyCodeLine{00169             \textcolor{keywordflow}{if} (haschanged)}
\DoxyCodeLine{00170                 EditorUtility.SetDirty(\_property.serializedObject.targetObject);}
\DoxyCodeLine{00171 }
\DoxyCodeLine{00172             EditorGUI.EndProperty();}
\DoxyCodeLine{00173 }
\DoxyCodeLine{00174             \textcolor{comment}{// Draw closing black separator}}
\DoxyCodeLine{00175             r.xMin -\/= PAD;}
\DoxyCodeLine{00176             r.xMax += PAD;}
\DoxyCodeLine{00177             EditorGUI.DrawRect(\textcolor{keyword}{new} Rect(r) \{ y = r.y + 26, height = 2 \}, \textcolor{keyword}{new} Color(.15f, .15f, .15f));}
\DoxyCodeLine{00178         \}}
\DoxyCodeLine{00179 }
\DoxyCodeLine{00180         \textcolor{keyword}{public} \textcolor{keyword}{override} \textcolor{keywordtype}{float} GetPropertyHeight(SerializedProperty property, GUIContent label)}
\DoxyCodeLine{00181         \{}
\DoxyCodeLine{00182             SerializedProperty hitscanType = \textcolor{keyword}{property}.FindPropertyRelative(\textcolor{stringliteral}{"{}hitscanType"{}});}
\DoxyCodeLine{00183 }
\DoxyCodeLine{00184             HitscanType hittype = (HitscanType)hitscanType.intValue;}
\DoxyCodeLine{00185 }
\DoxyCodeLine{00186             \textcolor{keywordtype}{bool} doesntNeedExtraLine = hittype == HitscanType.Raycast || hittype == HitscanType.OverlapSphere;}
\DoxyCodeLine{00187             \textcolor{keywordtype}{bool} needsExtraExtra = hittype == HitscanType.CapsuleCast || hittype == HitscanType.BoxCast;}
\DoxyCodeLine{00188             \textcolor{keywordtype}{bool} isOverlap = hittype.IsOverlap();}
\DoxyCodeLine{00189             \textcolor{keyword}{const} \textcolor{keywordtype}{int} SEPARATORS = 12;}
\DoxyCodeLine{00190             \textcolor{keywordflow}{return} SEPARATORS + (5 * SPACING + PAD * 2) + (isOverlap ? SPACING : 0) + (doesntNeedExtraLine ? 0 : (needsExtraExtra ? SPACING * 2 : SPACING)) + (hittype.IsCast() ? SPACING : 0);}
\DoxyCodeLine{00191         \}}
\DoxyCodeLine{00192     \}}
\DoxyCodeLine{00193 }
\DoxyCodeLine{00194 }
\DoxyCodeLine{00195 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00196 \}}
\DoxyCodeLine{00197 }
\DoxyCodeLine{00198 }
\DoxyCodeLine{00199 }

\end{DoxyCode}
