\doxysection{Ingame\+Control\+Panel.\+cs}
\label{_ingame_control_panel_8cs_source}\index{C:/\_SSDSPEEDUP/2021/GPS/gps2\_purrpatrator/GPS2\_Purrpatrator/Assets/Photon/PhotonUnityNetworking/Demos/DemoProcedural/Scripts/IngameControlPanel.cs@{C:/\_SSDSPEEDUP/2021/GPS/gps2\_purrpatrator/GPS2\_Purrpatrator/Assets/Photon/PhotonUnityNetworking/Demos/DemoProcedural/Scripts/IngameControlPanel.cs}}
\textbf{ Go to the documentation of this file.}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001 \textcolor{keyword}{using} ExitGames.Client.Photon;}
\DoxyCodeLine{00002 \textcolor{keyword}{using} Photon.Realtime;}
\DoxyCodeLine{00003 \textcolor{keyword}{using} UnityEngine;}
\DoxyCodeLine{00004 \textcolor{keyword}{using} UnityEngine.UI;}
\DoxyCodeLine{00005 }
\DoxyCodeLine{00006 \textcolor{keyword}{namespace }Photon.Pun.Demo.Procedural}
\DoxyCodeLine{00007 \{}
\DoxyCodeLine{00012     \textcolor{keyword}{public} \textcolor{keyword}{class }IngameControlPanel : MonoBehaviourPunCallbacks}
\DoxyCodeLine{00013     \{}
\DoxyCodeLine{00014         \textcolor{keyword}{private} \textcolor{keywordtype}{bool} isSeedValid;}
\DoxyCodeLine{00015 }
\DoxyCodeLine{00016         \textcolor{keyword}{private} InputField seedInputField;}
\DoxyCodeLine{00017         \textcolor{keyword}{private} Dropdown worldSizeDropdown;}
\DoxyCodeLine{00018         \textcolor{keyword}{private} Dropdown clusterSizeDropdown;}
\DoxyCodeLine{00019         \textcolor{keyword}{private} Dropdown worldTypeDropdown;}
\DoxyCodeLine{00020         \textcolor{keyword}{private} Button generateWorldButton;}
\DoxyCodeLine{00021 }
\DoxyCodeLine{00022 \textcolor{preprocessor}{        \#region UNITY}}
\DoxyCodeLine{00023 }
\DoxyCodeLine{00028         \textcolor{keyword}{public} \textcolor{keywordtype}{void} Awake()}
\DoxyCodeLine{00029         \{}
\DoxyCodeLine{00030             isSeedValid = \textcolor{keyword}{false};}
\DoxyCodeLine{00031 }
\DoxyCodeLine{00032             seedInputField = GetComponentInChildren<InputField>();}
\DoxyCodeLine{00033             seedInputField.characterLimit = 10;}
\DoxyCodeLine{00034             seedInputField.characterValidation = InputField.CharacterValidation.Integer;}
\DoxyCodeLine{00035             seedInputField.interactable = PhotonNetwork.PhotonServerSettings.StartInOfflineMode;}
\DoxyCodeLine{00036             seedInputField.onValueChanged.AddListener((\textcolor{keywordtype}{string} value) =>}
\DoxyCodeLine{00037             \{}
\DoxyCodeLine{00038                 \textcolor{keywordtype}{int} seed;}
\DoxyCodeLine{00039                 \textcolor{keywordflow}{if} (\textcolor{keywordtype}{int}.TryParse(value, out seed))}
\DoxyCodeLine{00040                 \{}
\DoxyCodeLine{00041                     isSeedValid = \textcolor{keyword}{true};}
\DoxyCodeLine{00042                     WorldGenerator.Instance.Seed = seed;}
\DoxyCodeLine{00043                 \}}
\DoxyCodeLine{00044                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{00045                 \{}
\DoxyCodeLine{00046                     isSeedValid = \textcolor{keyword}{false};}
\DoxyCodeLine{00047                     Debug.LogError(\textcolor{stringliteral}{"{}Invalid Seed entered. Only numeric Seeds are allowed."{}});}
\DoxyCodeLine{00048                 \}}
\DoxyCodeLine{00049             \});}
\DoxyCodeLine{00050 }
\DoxyCodeLine{00051             worldSizeDropdown = GetComponentsInChildren<Dropdown>()[0];}
\DoxyCodeLine{00052             worldSizeDropdown.interactable = PhotonNetwork.PhotonServerSettings.StartInOfflineMode;}
\DoxyCodeLine{00053             worldSizeDropdown.onValueChanged.AddListener((\textcolor{keywordtype}{int} value) =>}
\DoxyCodeLine{00054             \{}
\DoxyCodeLine{00055                 \textcolor{keywordflow}{switch} (value)}
\DoxyCodeLine{00056                 \{}
\DoxyCodeLine{00057                     \textcolor{keywordflow}{case} 0:}
\DoxyCodeLine{00058                     \{}
\DoxyCodeLine{00059                         WorldGenerator.Instance.WorldSize = WorldSize.Tiny;}
\DoxyCodeLine{00060                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00061                     \}}
\DoxyCodeLine{00062                     \textcolor{keywordflow}{case} 1:}
\DoxyCodeLine{00063                     \{}
\DoxyCodeLine{00064                         WorldGenerator.Instance.WorldSize = WorldSize.Small;}
\DoxyCodeLine{00065                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00066                     \}}
\DoxyCodeLine{00067                     \textcolor{keywordflow}{case} 2:}
\DoxyCodeLine{00068                     \{}
\DoxyCodeLine{00069                         WorldGenerator.Instance.WorldSize = WorldSize.Medium;}
\DoxyCodeLine{00070                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00071                     \}}
\DoxyCodeLine{00072                     \textcolor{keywordflow}{case} 3:}
\DoxyCodeLine{00073                     \{}
\DoxyCodeLine{00074                         WorldGenerator.Instance.WorldSize = WorldSize.Large;}
\DoxyCodeLine{00075                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00076                     \}}
\DoxyCodeLine{00077                 \}}
\DoxyCodeLine{00078             \});}
\DoxyCodeLine{00079 }
\DoxyCodeLine{00080             clusterSizeDropdown = GetComponentsInChildren<Dropdown>()[1];}
\DoxyCodeLine{00081             clusterSizeDropdown.interactable = PhotonNetwork.PhotonServerSettings.StartInOfflineMode;}
\DoxyCodeLine{00082             clusterSizeDropdown.onValueChanged.AddListener((\textcolor{keywordtype}{int} value) =>}
\DoxyCodeLine{00083             \{}
\DoxyCodeLine{00084                 \textcolor{keywordflow}{switch} (value)}
\DoxyCodeLine{00085                 \{}
\DoxyCodeLine{00086                     \textcolor{keywordflow}{case} 0:}
\DoxyCodeLine{00087                     \{}
\DoxyCodeLine{00088                         WorldGenerator.Instance.ClusterSize = ClusterSize.Small;}
\DoxyCodeLine{00089                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00090                     \}}
\DoxyCodeLine{00091                     \textcolor{keywordflow}{case} 1:}
\DoxyCodeLine{00092                     \{}
\DoxyCodeLine{00093                         WorldGenerator.Instance.ClusterSize = ClusterSize.Medium;}
\DoxyCodeLine{00094                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00095                     \}}
\DoxyCodeLine{00096                     \textcolor{keywordflow}{case} 2:}
\DoxyCodeLine{00097                     \{}
\DoxyCodeLine{00098                         WorldGenerator.Instance.ClusterSize = ClusterSize.Large;}
\DoxyCodeLine{00099                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00100                     \}}
\DoxyCodeLine{00101                 \}}
\DoxyCodeLine{00102             \});}
\DoxyCodeLine{00103 }
\DoxyCodeLine{00104             worldTypeDropdown = GetComponentsInChildren<Dropdown>()[2];}
\DoxyCodeLine{00105             worldTypeDropdown.interactable = PhotonNetwork.PhotonServerSettings.StartInOfflineMode;}
\DoxyCodeLine{00106             worldTypeDropdown.onValueChanged.AddListener((\textcolor{keywordtype}{int} value) =>}
\DoxyCodeLine{00107             \{}
\DoxyCodeLine{00108                 \textcolor{keywordflow}{switch} (value)}
\DoxyCodeLine{00109                 \{}
\DoxyCodeLine{00110                     \textcolor{keywordflow}{case} 0:}
\DoxyCodeLine{00111                     \{}
\DoxyCodeLine{00112                         WorldGenerator.Instance.WorldType = WorldType.Flat;}
\DoxyCodeLine{00113                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00114                     \}}
\DoxyCodeLine{00115                     \textcolor{keywordflow}{case} 1:}
\DoxyCodeLine{00116                     \{}
\DoxyCodeLine{00117                         WorldGenerator.Instance.WorldType = WorldType.Standard;}
\DoxyCodeLine{00118                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00119                     \}}
\DoxyCodeLine{00120                     \textcolor{keywordflow}{case} 2:}
\DoxyCodeLine{00121                     \{}
\DoxyCodeLine{00122                         WorldGenerator.Instance.WorldType = WorldType.Mountain;}
\DoxyCodeLine{00123                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00124                     \}}
\DoxyCodeLine{00125                 \}}
\DoxyCodeLine{00126             \});}
\DoxyCodeLine{00127 }
\DoxyCodeLine{00128             generateWorldButton = GetComponentInChildren<Button>();}
\DoxyCodeLine{00129             generateWorldButton.interactable = PhotonNetwork.PhotonServerSettings.StartInOfflineMode;}
\DoxyCodeLine{00130             generateWorldButton.onClick.AddListener(() =>}
\DoxyCodeLine{00131             \{}
\DoxyCodeLine{00132                 \textcolor{keywordflow}{if} (!PhotonNetwork.InRoom)}
\DoxyCodeLine{00133                 \{}
\DoxyCodeLine{00134                     Debug.LogError(\textcolor{stringliteral}{"{}Client is not in a room."{}});}
\DoxyCodeLine{00135                     return;}
\DoxyCodeLine{00136                 \}}
\DoxyCodeLine{00137 }
\DoxyCodeLine{00138                 if (!isSeedValid)}
\DoxyCodeLine{00139                 \{}
\DoxyCodeLine{00140                     Debug.LogError(\textcolor{stringliteral}{"{}Invalid Seed entered. Only numeric Seeds are allowed."{}});}
\DoxyCodeLine{00141                     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00142                 \}}
\DoxyCodeLine{00143 }
\DoxyCodeLine{00144                 WorldGenerator.Instance.ConfirmAndUpdateProperties();}
\DoxyCodeLine{00145             \});}
\DoxyCodeLine{00146         \}}
\DoxyCodeLine{00147 }
\DoxyCodeLine{00148 \textcolor{preprocessor}{        \#endregion}}
\DoxyCodeLine{00149 }
\DoxyCodeLine{00150 \textcolor{preprocessor}{        \#region PUN CALLBACKS}}
\DoxyCodeLine{00151 }
\DoxyCodeLine{00157         \textcolor{keyword}{public} \textcolor{keyword}{override} \textcolor{keywordtype}{void} OnJoinedRoom()}
\DoxyCodeLine{00158         \{}
\DoxyCodeLine{00159             seedInputField.interactable = PhotonNetwork.IsMasterClient;}
\DoxyCodeLine{00160             worldSizeDropdown.interactable = PhotonNetwork.IsMasterClient;}
\DoxyCodeLine{00161             clusterSizeDropdown.interactable = PhotonNetwork.IsMasterClient;}
\DoxyCodeLine{00162             worldTypeDropdown.interactable = PhotonNetwork.IsMasterClient;}
\DoxyCodeLine{00163             generateWorldButton.interactable = PhotonNetwork.IsMasterClient;}
\DoxyCodeLine{00164         \}}
\DoxyCodeLine{00165 }
\DoxyCodeLine{00170         \textcolor{keyword}{public} \textcolor{keyword}{override} \textcolor{keywordtype}{void} OnMasterClientSwitched(Player newMasterClient)}
\DoxyCodeLine{00171         \{}
\DoxyCodeLine{00172             seedInputField.interactable = newMasterClient.IsLocal;}
\DoxyCodeLine{00173             worldSizeDropdown.interactable = newMasterClient.IsLocal;}
\DoxyCodeLine{00174             clusterSizeDropdown.interactable = newMasterClient.IsLocal;}
\DoxyCodeLine{00175             worldTypeDropdown.interactable = newMasterClient.IsLocal;}
\DoxyCodeLine{00176             generateWorldButton.interactable = newMasterClient.IsLocal;}
\DoxyCodeLine{00177         \}}
\DoxyCodeLine{00178 }
\DoxyCodeLine{00186         \textcolor{keyword}{public} \textcolor{keyword}{override} \textcolor{keywordtype}{void} OnRoomPropertiesUpdate(Hashtable propertiesThatChanged)}
\DoxyCodeLine{00187         \{}
\DoxyCodeLine{00188             \textcolor{keywordflow}{if} (propertiesThatChanged.ContainsKey(WorldGenerator.Instance.SeedPropertiesKey) \&\& propertiesThatChanged.ContainsKey(WorldGenerator.Instance.WorldSizePropertiesKey) \&\& propertiesThatChanged.ContainsKey(WorldGenerator.Instance.ClusterSizePropertiesKey) \&\& propertiesThatChanged.ContainsKey(WorldGenerator.Instance.WorldTypePropertiesKey))}
\DoxyCodeLine{00189             \{}
\DoxyCodeLine{00190                 \textcolor{comment}{// Updating Seed}}
\DoxyCodeLine{00191                 \textcolor{keywordtype}{int} seed = (int) propertiesThatChanged[WorldGenerator.Instance.SeedPropertiesKey];}
\DoxyCodeLine{00192                 seedInputField.text = seed.ToString();}
\DoxyCodeLine{00193 }
\DoxyCodeLine{00194                 \textcolor{comment}{// Updating World Size}}
\DoxyCodeLine{00195                 WorldSize worldSize = (WorldSize) propertiesThatChanged[WorldGenerator.Instance.WorldSizePropertiesKey];}
\DoxyCodeLine{00196                 switch (worldSize)}
\DoxyCodeLine{00197                 \{}
\DoxyCodeLine{00198                     \textcolor{keywordflow}{case} WorldSize.Tiny:}
\DoxyCodeLine{00199                     \{}
\DoxyCodeLine{00200                         worldSizeDropdown.value = 0;}
\DoxyCodeLine{00201                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00202                     \}}
\DoxyCodeLine{00203                     \textcolor{keywordflow}{case} WorldSize.Small:}
\DoxyCodeLine{00204                     \{}
\DoxyCodeLine{00205                         worldSizeDropdown.value = 1;}
\DoxyCodeLine{00206                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00207                     \}}
\DoxyCodeLine{00208                     \textcolor{keywordflow}{case} WorldSize.Medium:}
\DoxyCodeLine{00209                     \{}
\DoxyCodeLine{00210                         worldSizeDropdown.value = 2;}
\DoxyCodeLine{00211                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00212                     \}}
\DoxyCodeLine{00213                     \textcolor{keywordflow}{case} WorldSize.Large:}
\DoxyCodeLine{00214                     \{}
\DoxyCodeLine{00215                         worldSizeDropdown.value = 3;}
\DoxyCodeLine{00216                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00217                     \}}
\DoxyCodeLine{00218                 \}}
\DoxyCodeLine{00219 }
\DoxyCodeLine{00220                 \textcolor{comment}{// Updating Cluster Size}}
\DoxyCodeLine{00221                 ClusterSize clusterSize = (ClusterSize) propertiesThatChanged[WorldGenerator.Instance.ClusterSizePropertiesKey];}
\DoxyCodeLine{00222                 switch (clusterSize)}
\DoxyCodeLine{00223                 \{}
\DoxyCodeLine{00224                     \textcolor{keywordflow}{case} ClusterSize.Small:}
\DoxyCodeLine{00225                     \{}
\DoxyCodeLine{00226                         clusterSizeDropdown.value = 0;}
\DoxyCodeLine{00227                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00228                     \}}
\DoxyCodeLine{00229                     \textcolor{keywordflow}{case} ClusterSize.Medium:}
\DoxyCodeLine{00230                     \{}
\DoxyCodeLine{00231                         clusterSizeDropdown.value = 1;}
\DoxyCodeLine{00232                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00233                     \}}
\DoxyCodeLine{00234                     \textcolor{keywordflow}{case} ClusterSize.Large:}
\DoxyCodeLine{00235                     \{}
\DoxyCodeLine{00236                         clusterSizeDropdown.value = 2;}
\DoxyCodeLine{00237                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00238                     \}}
\DoxyCodeLine{00239                 \}}
\DoxyCodeLine{00240 }
\DoxyCodeLine{00241                 \textcolor{comment}{// Updating World Type}}
\DoxyCodeLine{00242                 WorldType worldType = (WorldType) propertiesThatChanged[WorldGenerator.Instance.WorldTypePropertiesKey];}
\DoxyCodeLine{00243                 switch (worldType)}
\DoxyCodeLine{00244                 \{}
\DoxyCodeLine{00245                     \textcolor{keywordflow}{case} WorldType.Flat:}
\DoxyCodeLine{00246                     \{}
\DoxyCodeLine{00247                         worldTypeDropdown.value = 0;}
\DoxyCodeLine{00248                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00249                     \}}
\DoxyCodeLine{00250                     \textcolor{keywordflow}{case} WorldType.Standard:}
\DoxyCodeLine{00251                     \{}
\DoxyCodeLine{00252                         worldTypeDropdown.value = 1;}
\DoxyCodeLine{00253                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00254                     \}}
\DoxyCodeLine{00255                     \textcolor{keywordflow}{case} WorldType.Mountain:}
\DoxyCodeLine{00256                     \{}
\DoxyCodeLine{00257                         worldTypeDropdown.value = 2;}
\DoxyCodeLine{00258                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{00259                     \}}
\DoxyCodeLine{00260                 \}}
\DoxyCodeLine{00261 }
\DoxyCodeLine{00262                 \textcolor{comment}{// Generating a new world}}
\DoxyCodeLine{00263                 WorldGenerator.Instance.CreateWorld();}
\DoxyCodeLine{00264             \}}
\DoxyCodeLine{00265         \}}
\DoxyCodeLine{00266 }
\DoxyCodeLine{00267 \textcolor{preprocessor}{        \#endregion}}
\DoxyCodeLine{00268     \}}
\DoxyCodeLine{00269 \}}

\end{DoxyCode}
