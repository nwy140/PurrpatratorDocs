\doxysection{Mount\+Settings.\+cs}
\label{_mount_settings_8cs_source}\index{C:/\_SSDSPEEDUP/2021/GPS/gps2\_purrpatrator/GPS2\_Purrpatrator/Assets/Photon/Simple/Components/Mount/MountSettings.cs@{C:/\_SSDSPEEDUP/2021/GPS/gps2\_purrpatrator/GPS2\_Purrpatrator/Assets/Photon/Simple/Components/Mount/MountSettings.cs}}
\textbf{ Go to the documentation of this file.}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001 \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00002 \textcolor{comment}{// <copyright>PhotonNetwork Framework for Unity -\/ Copyright (C) 2020 Exit Games GmbH</copyright>}}
\DoxyCodeLine{00003 \textcolor{comment}{// <author>developer@exitgames.com</author>}}
\DoxyCodeLine{00004 \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00005 }
\DoxyCodeLine{00006 \textcolor{keyword}{using} Photon.Utilities;}
\DoxyCodeLine{00007 \textcolor{keyword}{using} System.Collections.Generic;}
\DoxyCodeLine{00008 \textcolor{keyword}{using} UnityEngine;}
\DoxyCodeLine{00009 }
\DoxyCodeLine{00010 \textcolor{preprocessor}{\#if UNITY\_EDITOR}}
\DoxyCodeLine{00011 \textcolor{keyword}{using} UnityEditor;}
\DoxyCodeLine{00012 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00013 }
\DoxyCodeLine{00014 \textcolor{keyword}{namespace }Photon.Pun.Simple}
\DoxyCodeLine{00015 \{}
\DoxyCodeLine{00016 }
\DoxyCodeLine{00017 \textcolor{preprocessor}{\#if UNITY\_EDITOR}}
\DoxyCodeLine{00018     [HelpURL(Internal.SimpleDocsURLS.MOUNT\_SYSTEM)]}
\DoxyCodeLine{00019 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00020 }
\DoxyCodeLine{00021     \textcolor{keyword}{public} \textcolor{keyword}{class }MountSettings : SettingsScriptableObject<MountSettings>}
\DoxyCodeLine{00022     \{}
\DoxyCodeLine{00023 }
\DoxyCodeLine{00024 \textcolor{preprocessor}{        \#region Inspector}}
\DoxyCodeLine{00025 }
\DoxyCodeLine{00026         [HideInInspector]}
\DoxyCodeLine{00027         [SerializeField]}
\DoxyCodeLine{00028         \textcolor{keyword}{private} List<string> mountNames = \textcolor{keyword}{new} List<string>()}
\DoxyCodeLine{00029         \{}
\DoxyCodeLine{00030             \textcolor{stringliteral}{"{}Root"{}},}
\DoxyCodeLine{00031 }
\DoxyCodeLine{00032             \textcolor{stringliteral}{"{}1"{}}, \textcolor{stringliteral}{"{}2"{}}, \textcolor{stringliteral}{"{}3"{}}, \textcolor{stringliteral}{"{}4"{}}}
\DoxyCodeLine{00033         \};}
\DoxyCodeLine{00034 }
\DoxyCodeLine{00035 \textcolor{preprocessor}{        \#endregion}}
\DoxyCodeLine{00036 }
\DoxyCodeLine{00037         \textcolor{keyword}{public} \textcolor{keyword}{static} \textcolor{keywordtype}{int} mountTypeCount;}
\DoxyCodeLine{00038         \textcolor{keyword}{public} \textcolor{keyword}{static} \textcolor{keywordtype}{int} bitsForMountId;}
\DoxyCodeLine{00039 }
\DoxyCodeLine{00040         \textcolor{keyword}{public} \textcolor{keyword}{override} \textcolor{keywordtype}{void} Initialize()}
\DoxyCodeLine{00041         \{}
\DoxyCodeLine{00042             base.Initialize();}
\DoxyCodeLine{00043             mountTypeCount = Single.mountNames.Count;}
\DoxyCodeLine{00044             bitsForMountId = (mountTypeCount -\/ 1).GetBitsForMaxValue();}
\DoxyCodeLine{00045         \}}
\DoxyCodeLine{00046 }
\DoxyCodeLine{00050         \textcolor{comment}{//public static int GetBitsForMaxValue(int maxvalue)}}
\DoxyCodeLine{00051         \textcolor{comment}{//\{}}
\DoxyCodeLine{00052         \textcolor{comment}{//  for (int i = 0; i < 32; ++i)}}
\DoxyCodeLine{00053         \textcolor{comment}{//      if (maxvalue >> i == 0)}}
\DoxyCodeLine{00054         \textcolor{comment}{//          return i;}}
\DoxyCodeLine{00055         \textcolor{comment}{//  return 32;}}
\DoxyCodeLine{00056         \textcolor{comment}{//\}}}
\DoxyCodeLine{00057 }
\DoxyCodeLine{00062         \textcolor{keyword}{public} \textcolor{keyword}{static} \textcolor{keywordtype}{int} GetIndex(\textcolor{keywordtype}{string} name)}
\DoxyCodeLine{00063         \{}
\DoxyCodeLine{00064             \textcolor{keywordflow}{return} single.mountNames.IndexOf(name);}
\DoxyCodeLine{00065         \}}
\DoxyCodeLine{00066 }
\DoxyCodeLine{00067         \textcolor{keyword}{public} \textcolor{keyword}{static} \textcolor{keywordtype}{string} GetName(\textcolor{keywordtype}{int} index)}
\DoxyCodeLine{00068         \{}
\DoxyCodeLine{00069             \textcolor{keywordflow}{if} (index >= mountTypeCount)}
\DoxyCodeLine{00070                 \textcolor{keywordflow}{return} \textcolor{keyword}{null};}
\DoxyCodeLine{00071             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00072                 \textcolor{keywordflow}{return} single.mountNames[index];}
\DoxyCodeLine{00073         \}}
\DoxyCodeLine{00074 }
\DoxyCodeLine{00075         \textcolor{keyword}{public} \textcolor{keyword}{static} \textcolor{keywordtype}{int} AllTrueMask}
\DoxyCodeLine{00076         \{}
\DoxyCodeLine{00077             \textcolor{keyword}{get}}
\DoxyCodeLine{00078             \{}
\DoxyCodeLine{00079                 \textcolor{keywordtype}{int} cnt = Single.mountNames.Count;}
\DoxyCodeLine{00080 }
\DoxyCodeLine{00081                 \textcolor{keywordflow}{if} (cnt == 32)}
\DoxyCodeLine{00082                     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{00083 }
\DoxyCodeLine{00084                 \textcolor{keywordflow}{return} (\textcolor{keywordtype}{int})(((long)1 << Single.mountNames.Count) -\/ 1);}
\DoxyCodeLine{00085             \}}
\DoxyCodeLine{00086         \}}
\DoxyCodeLine{00087 }
\DoxyCodeLine{00088 }
\DoxyCodeLine{00089 }
\DoxyCodeLine{00090 \textcolor{preprocessor}{\#if UNITY\_EDITOR}}
\DoxyCodeLine{00091 }
\DoxyCodeLine{00092        }
\DoxyCodeLine{00093         \textcolor{keyword}{public} \textcolor{keyword}{override} \textcolor{keywordtype}{string} HelpURL \{ \textcolor{keyword}{get} \{ \textcolor{keywordflow}{return} Internal.SimpleDocsURLS.MOUNT\_SYSTEM; \} \}}
\DoxyCodeLine{00094 }
\DoxyCodeLine{00095         \textcolor{keyword}{public} \textcolor{keyword}{override} \textcolor{keywordtype}{string} SettingsName \{ \textcolor{keyword}{get} \{ \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}Mount Settings"{}}; \} \}}
\DoxyCodeLine{00096 }
\DoxyCodeLine{00097         \textcolor{keyword}{public} \textcolor{keyword}{static} \textcolor{keywordtype}{string}[] ToArray() \{ \textcolor{keywordflow}{return} Single.mountNames.ToArray(); \}}
\DoxyCodeLine{00098 }
\DoxyCodeLine{00103         \textcolor{keyword}{public} \textcolor{keyword}{static} \textcolor{keywordtype}{int} GetOrCreate(\textcolor{keywordtype}{string} name)}
\DoxyCodeLine{00104         \{}
\DoxyCodeLine{00105             var mountNames = single.mountNames;}
\DoxyCodeLine{00106             \textcolor{keywordtype}{int} index = mountNames.IndexOf(name);}
\DoxyCodeLine{00107             \textcolor{keywordflow}{if} (index == -\/1)}
\DoxyCodeLine{00108             \{}
\DoxyCodeLine{00109                 index = mountNames.Count;}
\DoxyCodeLine{00110                 mountNames.Add(name);}
\DoxyCodeLine{00111                 mountTypeCount = mountNames.Count;}
\DoxyCodeLine{00112             \}}
\DoxyCodeLine{00113 }
\DoxyCodeLine{00114             \textcolor{keywordflow}{return} index;}
\DoxyCodeLine{00115         \}}
\DoxyCodeLine{00116 }
\DoxyCodeLine{00117         [MenuItem(\textcolor{stringliteral}{"{}Window/Photon Unity Networking/Mount Settings"{}}, \textcolor{keyword}{false}, 204)]}
\DoxyCodeLine{00118         \textcolor{keyword}{private} \textcolor{keyword}{static} \textcolor{keywordtype}{void} SelectInstance()}
\DoxyCodeLine{00119         \{}
\DoxyCodeLine{00120             Single.SelectThisInstance();}
\DoxyCodeLine{00121         \}}
\DoxyCodeLine{00122 }
\DoxyCodeLine{00123         \textcolor{keyword}{public} \textcolor{keyword}{override} \textcolor{keywordtype}{bool} DrawGui(Object target, \textcolor{keywordtype}{bool} asFoldout, \textcolor{keywordtype}{bool} includeScriptField, \textcolor{keywordtype}{bool} initializeAsOpen = \textcolor{keyword}{true}, \textcolor{keywordtype}{bool} asWindow = \textcolor{keyword}{false})}
\DoxyCodeLine{00124         \{}
\DoxyCodeLine{00125 }
\DoxyCodeLine{00126             \textcolor{keywordtype}{bool} isExpanded = base.DrawGui(target, asFoldout, includeScriptField, initializeAsOpen, asWindow);}
\DoxyCodeLine{00127 }
\DoxyCodeLine{00128 }
\DoxyCodeLine{00129             \textcolor{keywordflow}{if} (isExpanded)}
\DoxyCodeLine{00130             \{}
\DoxyCodeLine{00131                 EditorGUI.BeginChangeCheck();}
\DoxyCodeLine{00132 }
\DoxyCodeLine{00133                 SerializedObject soTarget = \textcolor{keyword}{new} SerializedObject(Single);}
\DoxyCodeLine{00134 }
\DoxyCodeLine{00135                 var mountNames = soTarget.FindProperty(\textcolor{stringliteral}{"{}mountNames"{}});}
\DoxyCodeLine{00136                 \textcolor{keywordtype}{int} cnt = mountNames.arraySize;}
\DoxyCodeLine{00137 }
\DoxyCodeLine{00138 }
\DoxyCodeLine{00140                 \textcolor{keywordflow}{if} (cnt == 0)}
\DoxyCodeLine{00141                 \{}
\DoxyCodeLine{00142                     mountNames.InsertArrayElementAtIndex(0);}
\DoxyCodeLine{00143 }
\DoxyCodeLine{00144                 \}}
\DoxyCodeLine{00145                 var rootElement = mountNames.GetArrayElementAtIndex(0);}
\DoxyCodeLine{00146 }
\DoxyCodeLine{00147                 \textcolor{keywordflow}{if} (rootElement.stringValue != \textcolor{stringliteral}{"{}Root"{}})}
\DoxyCodeLine{00148                     rootElement.stringValue = \textcolor{stringliteral}{"{}Root"{}};}
\DoxyCodeLine{00149 }
\DoxyCodeLine{00151                 EditorGUILayout.LabelField(\textcolor{stringliteral}{"{}Defined Mounts:"{}});}
\DoxyCodeLine{00152                 EditorUtils.DrawEditableList(mountNames, \textcolor{keyword}{true}, \textcolor{stringliteral}{"{}Mount"{}});}
\DoxyCodeLine{00153 }
\DoxyCodeLine{00155                 \textcolor{keywordflow}{if} (EditorGUI.EndChangeCheck())}
\DoxyCodeLine{00156                 \{}
\DoxyCodeLine{00157                     Undo.RecordObject(Single, \textcolor{stringliteral}{"{}Modify Mount Settings "{}} + mountNames.arraySize);}
\DoxyCodeLine{00158                     soTarget.ApplyModifiedProperties();}
\DoxyCodeLine{00159 }
\DoxyCodeLine{00161                     MountSettings.mountTypeCount = mountNames.arraySize;}
\DoxyCodeLine{00162                     MountSettings.bitsForMountId = (mountNames.arraySize -\/ 1).GetBitsForMaxValue();}
\DoxyCodeLine{00163 }
\DoxyCodeLine{00164                     EditorUtility.SetDirty(\textcolor{keyword}{this});}
\DoxyCodeLine{00165                     AssetDatabase.SaveAssets();}
\DoxyCodeLine{00166                 \}}
\DoxyCodeLine{00167 }
\DoxyCodeLine{00169                 EditorGUILayout.HelpBox(bitsForMountId + \textcolor{stringliteral}{"{} bits for MountIds"{}}, MessageType.None);}
\DoxyCodeLine{00170 }
\DoxyCodeLine{00171             \}}
\DoxyCodeLine{00172 }
\DoxyCodeLine{00173             \textcolor{keywordflow}{return} isExpanded;}
\DoxyCodeLine{00174         \}}
\DoxyCodeLine{00175 }
\DoxyCodeLine{00176 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00177 }
\DoxyCodeLine{00178         [RuntimeInitializeOnLoadMethod(RuntimeInitializeLoadType.AfterSceneLoad)]}
\DoxyCodeLine{00179         \textcolor{keyword}{static} \textcolor{keywordtype}{void} Bootstrap()}
\DoxyCodeLine{00180         \{}
\DoxyCodeLine{00181             var single = Single;}
\DoxyCodeLine{00182         \}}
\DoxyCodeLine{00183 }
\DoxyCodeLine{00184 }
\DoxyCodeLine{00185 }
\DoxyCodeLine{00186     \}}
\DoxyCodeLine{00187 }
\DoxyCodeLine{00188 \textcolor{preprocessor}{\#if UNITY\_EDITOR}}
\DoxyCodeLine{00189 }
\DoxyCodeLine{00190     [CustomEditor(typeof(MountSettings))]}
\DoxyCodeLine{00191     [CanEditMultipleObjects]}
\DoxyCodeLine{00192     \textcolor{keyword}{public} \textcolor{keyword}{class }MountSettingsEditor : Editor}
\DoxyCodeLine{00193     \{}
\DoxyCodeLine{00194         \textcolor{keyword}{public} \textcolor{keyword}{override} \textcolor{keywordtype}{void} OnInspectorGUI()}
\DoxyCodeLine{00195         \{}
\DoxyCodeLine{00196 }
\DoxyCodeLine{00197             MountSettings.Single.DrawGui(target, \textcolor{keyword}{false}, \textcolor{keyword}{false}, \textcolor{keyword}{true});}
\DoxyCodeLine{00198         \}}
\DoxyCodeLine{00199     \}}
\DoxyCodeLine{00200 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00201 \}}

\end{DoxyCode}
