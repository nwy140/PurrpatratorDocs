\doxysection{Photon\+Lag\+Simulation\+Gui.\+cs}
\label{_photon_lag_simulation_gui_8cs_source}\index{C:/\_SSDSPEEDUP/2021/GPS/gps2\_purrpatrator/GPS2\_Purrpatrator/Assets/Photon/PhotonUnityNetworking/UtilityScripts/Debugging/PhotonLagSimulationGui.cs@{C:/\_SSDSPEEDUP/2021/GPS/gps2\_purrpatrator/GPS2\_Purrpatrator/Assets/Photon/PhotonUnityNetworking/UtilityScripts/Debugging/PhotonLagSimulationGui.cs}}
\textbf{ Go to the documentation of this file.}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001 \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00002 \textcolor{comment}{// <copyright file="{}PhotonLagSimulationGui.cs"{} company="{}Exit Games GmbH"{}>}}
\DoxyCodeLine{00003 \textcolor{comment}{//   Part of: Photon Unity Utilities,}}
\DoxyCodeLine{00004 \textcolor{comment}{// </copyright>}}
\DoxyCodeLine{00005 \textcolor{comment}{// <summary>}}
\DoxyCodeLine{00006 \textcolor{comment}{// This MonoBehaviour is a basic GUI for the Photon client's network-\/simulation feature.}}
\DoxyCodeLine{00007 \textcolor{comment}{// It can modify lag (fixed delay), jitter (random lag) and packet loss.}}
\DoxyCodeLine{00008 \textcolor{comment}{// Part of the [Optional GUI](@ref optionalGui).}}
\DoxyCodeLine{00009 \textcolor{comment}{// </summary>}}
\DoxyCodeLine{00010 \textcolor{comment}{// <author>developer@exitgames.com</author>}}
\DoxyCodeLine{00011 \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00012 }
\DoxyCodeLine{00013 }
\DoxyCodeLine{00014 \textcolor{keyword}{using} UnityEngine;}
\DoxyCodeLine{00015 }
\DoxyCodeLine{00016 \textcolor{keyword}{using} Photon.Pun;}
\DoxyCodeLine{00017 \textcolor{keyword}{using} Photon.Realtime;}
\DoxyCodeLine{00018 \textcolor{keyword}{using} ExitGames.Client.Photon;}
\DoxyCodeLine{00019 }
\DoxyCodeLine{00020 \textcolor{keyword}{namespace }Photon.Pun.UtilityScripts}
\DoxyCodeLine{00021 \{}
\DoxyCodeLine{00027     \textcolor{keyword}{public} \textcolor{keyword}{class }PhotonLagSimulationGui : MonoBehaviour}
\DoxyCodeLine{00028     \{}
\DoxyCodeLine{00030         \textcolor{keyword}{public} Rect WindowRect = \textcolor{keyword}{new} Rect(0, 100, 120, 100);}
\DoxyCodeLine{00031 }
\DoxyCodeLine{00033         \textcolor{keyword}{public} \textcolor{keywordtype}{int} WindowId = 101;}
\DoxyCodeLine{00034 }
\DoxyCodeLine{00036         \textcolor{keyword}{public} \textcolor{keywordtype}{bool} Visible = \textcolor{keyword}{true};}
\DoxyCodeLine{00037 }
\DoxyCodeLine{00039         \textcolor{keyword}{public} PhotonPeer Peer \{ \textcolor{keyword}{get}; \textcolor{keyword}{set}; \}}
\DoxyCodeLine{00040 }
\DoxyCodeLine{00041         \textcolor{keyword}{public} \textcolor{keywordtype}{void} Start()}
\DoxyCodeLine{00042         \{}
\DoxyCodeLine{00043             this.Peer = PhotonNetwork.NetworkingClient.LoadBalancingPeer;}
\DoxyCodeLine{00044         \}}
\DoxyCodeLine{00045 }
\DoxyCodeLine{00046         \textcolor{keyword}{public} \textcolor{keywordtype}{void} OnGUI()}
\DoxyCodeLine{00047         \{}
\DoxyCodeLine{00048             \textcolor{keywordflow}{if} (!this.Visible)}
\DoxyCodeLine{00049             \{}
\DoxyCodeLine{00050                 \textcolor{keywordflow}{return};}
\DoxyCodeLine{00051             \}}
\DoxyCodeLine{00052 }
\DoxyCodeLine{00053             \textcolor{keywordflow}{if} (this.Peer == \textcolor{keyword}{null})}
\DoxyCodeLine{00054             \{}
\DoxyCodeLine{00055                 this.WindowRect = GUILayout.Window(this.WindowId, this.WindowRect, this.NetSimHasNoPeerWindow, \textcolor{stringliteral}{"{}Netw. Sim."{}});}
\DoxyCodeLine{00056             \}}
\DoxyCodeLine{00057             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00058             \{}
\DoxyCodeLine{00059                 this.WindowRect = GUILayout.Window(this.WindowId, this.WindowRect, this.NetSimWindow, \textcolor{stringliteral}{"{}Netw. Sim."{}});}
\DoxyCodeLine{00060             \}}
\DoxyCodeLine{00061         \}}
\DoxyCodeLine{00062 }
\DoxyCodeLine{00063         \textcolor{keyword}{private} \textcolor{keywordtype}{void} NetSimHasNoPeerWindow(\textcolor{keywordtype}{int} windowId)}
\DoxyCodeLine{00064         \{}
\DoxyCodeLine{00065             GUILayout.Label(\textcolor{stringliteral}{"{}No peer to communicate with. "{}});}
\DoxyCodeLine{00066         \}}
\DoxyCodeLine{00067 }
\DoxyCodeLine{00068         \textcolor{keyword}{private} \textcolor{keywordtype}{void} NetSimWindow(\textcolor{keywordtype}{int} windowId)}
\DoxyCodeLine{00069         \{}
\DoxyCodeLine{00070             GUILayout.Label(\textcolor{keywordtype}{string}.Format(\textcolor{stringliteral}{"{}Rtt:\{0,4\} +/-\/\{1,3\}"{}}, this.Peer.RoundTripTime, \textcolor{keyword}{this}.Peer.RoundTripTimeVariance));}
\DoxyCodeLine{00071 }
\DoxyCodeLine{00072             \textcolor{keywordtype}{bool} simEnabled = this.Peer.IsSimulationEnabled;}
\DoxyCodeLine{00073             \textcolor{keywordtype}{bool} newSimEnabled = GUILayout.Toggle(simEnabled, \textcolor{stringliteral}{"{}Simulate"{}});}
\DoxyCodeLine{00074             \textcolor{keywordflow}{if} (newSimEnabled != simEnabled)}
\DoxyCodeLine{00075             \{}
\DoxyCodeLine{00076                 this.Peer.IsSimulationEnabled = newSimEnabled;}
\DoxyCodeLine{00077             \}}
\DoxyCodeLine{00078 }
\DoxyCodeLine{00079             \textcolor{keywordtype}{float} inOutLag = this.Peer.NetworkSimulationSettings.IncomingLag;}
\DoxyCodeLine{00080             GUILayout.Label(\textcolor{stringliteral}{"{}Lag "{}} + inOutLag);}
\DoxyCodeLine{00081             inOutLag = GUILayout.HorizontalSlider(inOutLag, 0, 500);}
\DoxyCodeLine{00082 }
\DoxyCodeLine{00083             this.Peer.NetworkSimulationSettings.IncomingLag = (int)inOutLag;}
\DoxyCodeLine{00084             this.Peer.NetworkSimulationSettings.OutgoingLag = (int)inOutLag;}
\DoxyCodeLine{00085 }
\DoxyCodeLine{00086             \textcolor{keywordtype}{float} inOutJitter = this.Peer.NetworkSimulationSettings.IncomingJitter;}
\DoxyCodeLine{00087             GUILayout.Label(\textcolor{stringliteral}{"{}Jit "{}} + inOutJitter);}
\DoxyCodeLine{00088             inOutJitter = GUILayout.HorizontalSlider(inOutJitter, 0, 100);}
\DoxyCodeLine{00089 }
\DoxyCodeLine{00090             this.Peer.NetworkSimulationSettings.IncomingJitter = (int)inOutJitter;}
\DoxyCodeLine{00091             this.Peer.NetworkSimulationSettings.OutgoingJitter = (int)inOutJitter;}
\DoxyCodeLine{00092 }
\DoxyCodeLine{00093             \textcolor{keywordtype}{float} loss = this.Peer.NetworkSimulationSettings.IncomingLossPercentage;}
\DoxyCodeLine{00094             GUILayout.Label(\textcolor{stringliteral}{"{}Loss "{}} + loss);}
\DoxyCodeLine{00095             loss = GUILayout.HorizontalSlider(loss, 0, 10);}
\DoxyCodeLine{00096 }
\DoxyCodeLine{00097             this.Peer.NetworkSimulationSettings.IncomingLossPercentage = (int)loss;}
\DoxyCodeLine{00098             this.Peer.NetworkSimulationSettings.OutgoingLossPercentage = (int)loss;}
\DoxyCodeLine{00099 }
\DoxyCodeLine{00100             \textcolor{comment}{// if anything was clicked, the height of this window is likely changed. reduce it to be layouted again next frame}}
\DoxyCodeLine{00101             \textcolor{keywordflow}{if} (GUI.changed)}
\DoxyCodeLine{00102             \{}
\DoxyCodeLine{00103                 this.WindowRect.height = 100;}
\DoxyCodeLine{00104             \}}
\DoxyCodeLine{00105 }
\DoxyCodeLine{00106             GUI.DragWindow();}
\DoxyCodeLine{00107         \}}
\DoxyCodeLine{00108     \}}
\DoxyCodeLine{00109 \}}

\end{DoxyCode}
