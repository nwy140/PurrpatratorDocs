\doxysection{Room\+Info.\+cs}
\label{_room_info_8cs_source}\index{C:/\_SSDSPEEDUP/2021/GPS/gps2\_purrpatrator/GPS2\_Purrpatrator/Assets/Photon/PhotonRealtime/Code/RoomInfo.cs@{C:/\_SSDSPEEDUP/2021/GPS/gps2\_purrpatrator/GPS2\_Purrpatrator/Assets/Photon/PhotonRealtime/Code/RoomInfo.cs}}
\textbf{ Go to the documentation of this file.}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001 \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00002 \textcolor{comment}{// <copyright file="{}RoomInfo.cs"{} company="{}Exit Games GmbH"{}>}}
\DoxyCodeLine{00003 \textcolor{comment}{//   Loadbalancing Framework for Photon -\/ Copyright (C) 2018 Exit Games GmbH}}
\DoxyCodeLine{00004 \textcolor{comment}{// </copyright>}}
\DoxyCodeLine{00005 \textcolor{comment}{// <summary>}}
\DoxyCodeLine{00006 \textcolor{comment}{//   This class resembles info about available rooms, as sent by the Master}}
\DoxyCodeLine{00007 \textcolor{comment}{//   server's lobby. Consider all values as readonly.}}
\DoxyCodeLine{00008 \textcolor{comment}{// </summary>}}
\DoxyCodeLine{00009 \textcolor{comment}{// <author>developer@photonengine.com</author>}}
\DoxyCodeLine{00010 \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00011 }
\DoxyCodeLine{00012 \textcolor{preprocessor}{\#if UNITY\_4\_7 || UNITY\_5 || UNITY\_5\_3\_OR\_NEWER}}
\DoxyCodeLine{00013 \textcolor{preprocessor}{\#define SUPPORTED\_UNITY}}
\DoxyCodeLine{00014 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00015 }
\DoxyCodeLine{00016 }
\DoxyCodeLine{00017 \textcolor{keyword}{namespace }Photon.Realtime}
\DoxyCodeLine{00018 \{}
\DoxyCodeLine{00019     \textcolor{keyword}{using} System.Collections;}
\DoxyCodeLine{00020     \textcolor{keyword}{using} ExitGames.Client.Photon;}
\DoxyCodeLine{00021 }
\DoxyCodeLine{00022 \textcolor{preprocessor}{    \#if SUPPORTED\_UNITY || NETFX\_CORE}}
\DoxyCodeLine{00023     \textcolor{keyword}{using} Hashtable = ExitGames.Client.Photon.Hashtable;}
\DoxyCodeLine{00024     \textcolor{keyword}{using} SupportClass = ExitGames.Client.Photon.SupportClass;}
\DoxyCodeLine{00025 \textcolor{preprocessor}{    \#endif}}
\DoxyCodeLine{00026 }
\DoxyCodeLine{00027 }
\DoxyCodeLine{00036     \textcolor{keyword}{public} \textcolor{keyword}{class }RoomInfo}
\DoxyCodeLine{00037     \{}
\DoxyCodeLine{00039         \textcolor{keyword}{public} \textcolor{keywordtype}{bool} RemovedFromList;}
\DoxyCodeLine{00040 }
\DoxyCodeLine{00042         \textcolor{keyword}{private} Hashtable customProperties = \textcolor{keyword}{new} Hashtable();}
\DoxyCodeLine{00043 }
\DoxyCodeLine{00045         \textcolor{keyword}{protected} \textcolor{keywordtype}{byte} maxPlayers = 0;}
\DoxyCodeLine{00046 }
\DoxyCodeLine{00048         \textcolor{keyword}{protected} \textcolor{keywordtype}{int} emptyRoomTtl = 0;}
\DoxyCodeLine{00049 }
\DoxyCodeLine{00051         \textcolor{keyword}{protected} \textcolor{keywordtype}{int} playerTtl = 0;}
\DoxyCodeLine{00052 }
\DoxyCodeLine{00054         \textcolor{keyword}{protected} \textcolor{keywordtype}{string}[] expectedUsers;}
\DoxyCodeLine{00055 }
\DoxyCodeLine{00057         \textcolor{keyword}{protected} \textcolor{keywordtype}{bool} isOpen = \textcolor{keyword}{true};}
\DoxyCodeLine{00058 }
\DoxyCodeLine{00060         \textcolor{keyword}{protected} \textcolor{keywordtype}{bool} isVisible = \textcolor{keyword}{true};}
\DoxyCodeLine{00061 }
\DoxyCodeLine{00063         \textcolor{keyword}{protected} \textcolor{keywordtype}{bool} autoCleanUp = \textcolor{keyword}{true};}
\DoxyCodeLine{00064 }
\DoxyCodeLine{00066         \textcolor{keyword}{protected} \textcolor{keywordtype}{string} name;}
\DoxyCodeLine{00067 }
\DoxyCodeLine{00069         \textcolor{keyword}{public} \textcolor{keywordtype}{int} masterClientId;}
\DoxyCodeLine{00070 }
\DoxyCodeLine{00072         \textcolor{keyword}{protected} \textcolor{keywordtype}{string}[] propertiesListedInLobby;}
\DoxyCodeLine{00073 }
\DoxyCodeLine{00077         \textcolor{keyword}{public} Hashtable CustomProperties}
\DoxyCodeLine{00078         \{}
\DoxyCodeLine{00079             \textcolor{keyword}{get}}
\DoxyCodeLine{00080             \{}
\DoxyCodeLine{00081                 \textcolor{keywordflow}{return} this.customProperties;}
\DoxyCodeLine{00082             \}}
\DoxyCodeLine{00083         \}}
\DoxyCodeLine{00084 }
\DoxyCodeLine{00086         \textcolor{keyword}{public} \textcolor{keywordtype}{string} Name}
\DoxyCodeLine{00087         \{}
\DoxyCodeLine{00088             \textcolor{keyword}{get}}
\DoxyCodeLine{00089             \{}
\DoxyCodeLine{00090                 \textcolor{keywordflow}{return} this.name;}
\DoxyCodeLine{00091             \}}
\DoxyCodeLine{00092         \}}
\DoxyCodeLine{00093 }
\DoxyCodeLine{00097         \textcolor{keyword}{public} \textcolor{keywordtype}{int} PlayerCount \{ \textcolor{keyword}{get}; \textcolor{keyword}{private} \textcolor{keyword}{set}; \}}
\DoxyCodeLine{00098         }
\DoxyCodeLine{00107         \textcolor{keyword}{public} \textcolor{keywordtype}{byte} MaxPlayers}
\DoxyCodeLine{00108         \{}
\DoxyCodeLine{00109             \textcolor{keyword}{get}}
\DoxyCodeLine{00110             \{}
\DoxyCodeLine{00111                 \textcolor{keywordflow}{return} this.maxPlayers;}
\DoxyCodeLine{00112             \}}
\DoxyCodeLine{00113         \}}
\DoxyCodeLine{00114 }
\DoxyCodeLine{00127         \textcolor{keyword}{public} \textcolor{keywordtype}{bool} IsOpen}
\DoxyCodeLine{00128         \{}
\DoxyCodeLine{00129             \textcolor{keyword}{get}}
\DoxyCodeLine{00130             \{}
\DoxyCodeLine{00131                 \textcolor{keywordflow}{return} this.isOpen;}
\DoxyCodeLine{00132             \}}
\DoxyCodeLine{00133         \}}
\DoxyCodeLine{00134 }
\DoxyCodeLine{00144         \textcolor{keyword}{public} \textcolor{keywordtype}{bool} IsVisible}
\DoxyCodeLine{00145         \{}
\DoxyCodeLine{00146             \textcolor{keyword}{get}}
\DoxyCodeLine{00147             \{}
\DoxyCodeLine{00148                 \textcolor{keywordflow}{return} this.isVisible;}
\DoxyCodeLine{00149             \}}
\DoxyCodeLine{00150         \}}
\DoxyCodeLine{00151 }
\DoxyCodeLine{00157         \textcolor{keyword}{protected} \textcolor{keyword}{internal} RoomInfo(\textcolor{keywordtype}{string} roomName, Hashtable roomProperties)}
\DoxyCodeLine{00158         \{}
\DoxyCodeLine{00159             this.InternalCacheProperties(roomProperties);}
\DoxyCodeLine{00160 }
\DoxyCodeLine{00161             this.name = roomName;}
\DoxyCodeLine{00162         \}}
\DoxyCodeLine{00163 }
\DoxyCodeLine{00167         \textcolor{keyword}{public} \textcolor{keyword}{override} \textcolor{keywordtype}{bool} Equals(\textcolor{keywordtype}{object} other)}
\DoxyCodeLine{00168         \{}
\DoxyCodeLine{00169             RoomInfo otherRoomInfo = other as RoomInfo;}
\DoxyCodeLine{00170             \textcolor{keywordflow}{return} (otherRoomInfo != \textcolor{keyword}{null} \&\& this.Name.Equals(otherRoomInfo.name));}
\DoxyCodeLine{00171         \}}
\DoxyCodeLine{00172 }
\DoxyCodeLine{00177         \textcolor{keyword}{public} \textcolor{keyword}{override} \textcolor{keywordtype}{int} GetHashCode()}
\DoxyCodeLine{00178         \{}
\DoxyCodeLine{00179             \textcolor{keywordflow}{return} this.name.GetHashCode();}
\DoxyCodeLine{00180         \}}
\DoxyCodeLine{00181 }
\DoxyCodeLine{00182 }
\DoxyCodeLine{00185         \textcolor{keyword}{public} \textcolor{keyword}{override} \textcolor{keywordtype}{string} ToString()}
\DoxyCodeLine{00186         \{}
\DoxyCodeLine{00187             \textcolor{keywordflow}{return} \textcolor{keywordtype}{string}.Format(\textcolor{stringliteral}{"{}Room: '\{0\}' \{1\},\{2\} \{4\}/\{3\} players."{}}, this.name, this.isVisible ? \textcolor{stringliteral}{"{}visible"{}} : \textcolor{stringliteral}{"{}hidden"{}}, this.isOpen ? \textcolor{stringliteral}{"{}open"{}} : \textcolor{stringliteral}{"{}closed"{}}, this.maxPlayers, this.PlayerCount);}
\DoxyCodeLine{00188         \}}
\DoxyCodeLine{00189 }
\DoxyCodeLine{00192         \textcolor{keyword}{public} \textcolor{keywordtype}{string} ToStringFull()}
\DoxyCodeLine{00193         \{}
\DoxyCodeLine{00194             \textcolor{keywordflow}{return} \textcolor{keywordtype}{string}.Format(\textcolor{stringliteral}{"{}Room: '\{0\}' \{1\},\{2\} \{4\}/\{3\} players.\(\backslash\)ncustomProps: \{5\}"{}}, this.name, this.isVisible ? \textcolor{stringliteral}{"{}visible"{}} : \textcolor{stringliteral}{"{}hidden"{}}, this.isOpen ? \textcolor{stringliteral}{"{}open"{}} : \textcolor{stringliteral}{"{}closed"{}}, this.maxPlayers, this.PlayerCount, this.customProperties.ToStringFull());}
\DoxyCodeLine{00195         \}}
\DoxyCodeLine{00196 }
\DoxyCodeLine{00199         \textcolor{keyword}{protected} \textcolor{keyword}{internal} \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} InternalCacheProperties(Hashtable propertiesToCache)}
\DoxyCodeLine{00200         \{}
\DoxyCodeLine{00201             \textcolor{keywordflow}{if} (propertiesToCache == \textcolor{keyword}{null} || propertiesToCache.Count == 0 || \textcolor{keyword}{this}.customProperties.Equals(propertiesToCache))}
\DoxyCodeLine{00202             \{}
\DoxyCodeLine{00203                 \textcolor{keywordflow}{return};}
\DoxyCodeLine{00204             \}}
\DoxyCodeLine{00205 }
\DoxyCodeLine{00206             \textcolor{comment}{// check of this game was removed from the list. in that case, we don't}}
\DoxyCodeLine{00207             \textcolor{comment}{// need to read any further properties}}
\DoxyCodeLine{00208             \textcolor{comment}{// list updates will remove this game from the game listing}}
\DoxyCodeLine{00209             \textcolor{keywordflow}{if} (propertiesToCache.ContainsKey(GamePropertyKey.Removed))}
\DoxyCodeLine{00210             \{}
\DoxyCodeLine{00211                 this.RemovedFromList = (bool)propertiesToCache[GamePropertyKey.Removed];}
\DoxyCodeLine{00212                 if (this.RemovedFromList)}
\DoxyCodeLine{00213                 \{}
\DoxyCodeLine{00214                     \textcolor{keywordflow}{return};}
\DoxyCodeLine{00215                 \}}
\DoxyCodeLine{00216             \}}
\DoxyCodeLine{00217 }
\DoxyCodeLine{00218             \textcolor{comment}{// fetch the "{}well known"{} properties of the room, if available}}
\DoxyCodeLine{00219             \textcolor{keywordflow}{if} (propertiesToCache.ContainsKey(GamePropertyKey.MaxPlayers))}
\DoxyCodeLine{00220             \{}
\DoxyCodeLine{00221                 this.maxPlayers = (byte)propertiesToCache[GamePropertyKey.MaxPlayers];}
\DoxyCodeLine{00222             \}}
\DoxyCodeLine{00223 }
\DoxyCodeLine{00224             \textcolor{keywordflow}{if} (propertiesToCache.ContainsKey(GamePropertyKey.IsOpen))}
\DoxyCodeLine{00225             \{}
\DoxyCodeLine{00226                 this.isOpen = (bool)propertiesToCache[GamePropertyKey.IsOpen];}
\DoxyCodeLine{00227             \}}
\DoxyCodeLine{00228 }
\DoxyCodeLine{00229             \textcolor{keywordflow}{if} (propertiesToCache.ContainsKey(GamePropertyKey.IsVisible))}
\DoxyCodeLine{00230             \{}
\DoxyCodeLine{00231                 this.isVisible = (bool)propertiesToCache[GamePropertyKey.IsVisible];}
\DoxyCodeLine{00232             \}}
\DoxyCodeLine{00233 }
\DoxyCodeLine{00234             \textcolor{keywordflow}{if} (propertiesToCache.ContainsKey(GamePropertyKey.PlayerCount))}
\DoxyCodeLine{00235             \{}
\DoxyCodeLine{00236                 this.PlayerCount = (int)((\textcolor{keywordtype}{byte})propertiesToCache[GamePropertyKey.PlayerCount]);}
\DoxyCodeLine{00237             \}}
\DoxyCodeLine{00238 }
\DoxyCodeLine{00239             \textcolor{keywordflow}{if} (propertiesToCache.ContainsKey(GamePropertyKey.CleanupCacheOnLeave))}
\DoxyCodeLine{00240             \{}
\DoxyCodeLine{00241                 this.autoCleanUp = (bool)propertiesToCache[GamePropertyKey.CleanupCacheOnLeave];}
\DoxyCodeLine{00242             \}}
\DoxyCodeLine{00243 }
\DoxyCodeLine{00244             \textcolor{keywordflow}{if} (propertiesToCache.ContainsKey(GamePropertyKey.MasterClientId))}
\DoxyCodeLine{00245             \{}
\DoxyCodeLine{00246                 this.masterClientId = (int)propertiesToCache[GamePropertyKey.MasterClientId];}
\DoxyCodeLine{00247             \}}
\DoxyCodeLine{00248 }
\DoxyCodeLine{00249             \textcolor{keywordflow}{if} (propertiesToCache.ContainsKey(GamePropertyKey.PropsListedInLobby))}
\DoxyCodeLine{00250             \{}
\DoxyCodeLine{00251                 this.propertiesListedInLobby = propertiesToCache[GamePropertyKey.PropsListedInLobby] as \textcolor{keywordtype}{string}[];}
\DoxyCodeLine{00252             \}}
\DoxyCodeLine{00253 }
\DoxyCodeLine{00254             \textcolor{keywordflow}{if} (propertiesToCache.ContainsKey((\textcolor{keywordtype}{byte})GamePropertyKey.ExpectedUsers))}
\DoxyCodeLine{00255             \{}
\DoxyCodeLine{00256                 this.expectedUsers = (\textcolor{keywordtype}{string}[])propertiesToCache[GamePropertyKey.ExpectedUsers];}
\DoxyCodeLine{00257             \}}
\DoxyCodeLine{00258 }
\DoxyCodeLine{00259             \textcolor{keywordflow}{if} (propertiesToCache.ContainsKey((\textcolor{keywordtype}{byte})GamePropertyKey.EmptyRoomTtl))}
\DoxyCodeLine{00260             \{}
\DoxyCodeLine{00261                 this.emptyRoomTtl = (int)propertiesToCache[GamePropertyKey.EmptyRoomTtl];}
\DoxyCodeLine{00262             \}}
\DoxyCodeLine{00263 }
\DoxyCodeLine{00264             \textcolor{keywordflow}{if} (propertiesToCache.ContainsKey((\textcolor{keywordtype}{byte})GamePropertyKey.PlayerTtl))}
\DoxyCodeLine{00265             \{}
\DoxyCodeLine{00266                 this.playerTtl = (int)propertiesToCache[GamePropertyKey.PlayerTtl];}
\DoxyCodeLine{00267             \}}
\DoxyCodeLine{00268 }
\DoxyCodeLine{00269             \textcolor{comment}{// merge the custom properties (from your application) to the cache (only string-\/typed keys will be kept)}}
\DoxyCodeLine{00270             this.customProperties.MergeStringKeys(propertiesToCache);}
\DoxyCodeLine{00271             this.customProperties.StripKeysWithNullValues();}
\DoxyCodeLine{00272         \}}
\DoxyCodeLine{00273     \}}
\DoxyCodeLine{00274 \}}

\end{DoxyCode}
