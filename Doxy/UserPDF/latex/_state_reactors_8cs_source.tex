\doxysection{State\+Reactors.\+cs}
\label{_state_reactors_8cs_source}\index{C:/\_SSDSPEEDUP/2021/GPS/gps2\_purrpatrator/GPS2\_Purrpatrator/Assets/Photon/Simple/Components/SyncState/StateReactors.cs@{C:/\_SSDSPEEDUP/2021/GPS/gps2\_purrpatrator/GPS2\_Purrpatrator/Assets/Photon/Simple/Components/SyncState/StateReactors.cs}}
\textbf{ Go to the documentation of this file.}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001 }
\DoxyCodeLine{00005 }
\DoxyCodeLine{00006 \textcolor{comment}{//using UnityEngine;}}
\DoxyCodeLine{00007 }
\DoxyCodeLine{00008 }
\DoxyCodeLine{00009 \textcolor{comment}{//namespace Photon.Pun.Simple}}
\DoxyCodeLine{00010 \textcolor{comment}{//\{}}
\DoxyCodeLine{00011 \textcolor{comment}{//  public static class StateReactors}}
\DoxyCodeLine{00012 \textcolor{comment}{//  \{}}
\DoxyCodeLine{00013 \textcolor{comment}{//      ///// <summary>}}
\DoxyCodeLine{00014 \textcolor{comment}{//      ///// Convert mountId into a mount's transform, and attach attachment.}}
\DoxyCodeLine{00015 \textcolor{comment}{//      ///// </summary>}}
\DoxyCodeLine{00016 \textcolor{comment}{//      ///// <param name="{}state"{}></param>}}
\DoxyCodeLine{00017 \textcolor{comment}{//      ///// <param name="{}mountId"{}></param>}}
\DoxyCodeLine{00018 \textcolor{comment}{//      ///// <param name="{}attachmentTransform"{}></param>}}
\DoxyCodeLine{00019 \textcolor{comment}{//      ///// <param name="{}attachedTo"{}></param>}}
\DoxyCodeLine{00020 \textcolor{comment}{//      //public static void AttachTransform(ObjState state, int mountId, Transform attachmentTransform, List<IOnTeleport> callbacks, Mount attachedTo = null)}}
\DoxyCodeLine{00021 \textcolor{comment}{//      //\{}}
\DoxyCodeLine{00022 \textcolor{comment}{//      //  //Debug.Log(Time.time + "{} "{} +attachmentTransform.name + "{} "{} + state + "{} AttachTrans to "{} + attachedTo);}}
\DoxyCodeLine{00023 }
\DoxyCodeLine{00024 \textcolor{comment}{//      //  if ((state \& ObjState.Attached) != 0)}}
\DoxyCodeLine{00025 \textcolor{comment}{//      //  \{}}
\DoxyCodeLine{00026 \textcolor{comment}{//      //      var trans = StateReactors.GetAttachToTransform(attachedTo, mountId);}}
\DoxyCodeLine{00027 \textcolor{comment}{//      //      if (trans)}}
\DoxyCodeLine{00028 \textcolor{comment}{//      //      \{}}
\DoxyCodeLine{00029                     }
\DoxyCodeLine{00030 \textcolor{comment}{//      //          //attachmentTransform.localPosition = new Vector3(0, 0, 0);}}
\DoxyCodeLine{00031 \textcolor{comment}{//      //          //attachmentTransform.localRotation = new Quaternion(0, 0, 0, 1);}}
\DoxyCodeLine{00032 }
\DoxyCodeLine{00033 \textcolor{comment}{//      //          for (int i = 0; i < callbacks.Count; ++i)}}
\DoxyCodeLine{00034 \textcolor{comment}{//      //              callbacks[i].OnTeleport(new Vector3(), new Quaternion(), null);}}
\DoxyCodeLine{00035 }
\DoxyCodeLine{00036 \textcolor{comment}{//      //          attachmentTransform.parent = trans;}}
\DoxyCodeLine{00037 \textcolor{comment}{//      //          attachmentTransform.position = new Vector3();}}
\DoxyCodeLine{00038 \textcolor{comment}{//      //          attachmentTransform.rotation = new Quaternion();}}
\DoxyCodeLine{00039 \textcolor{comment}{//      //      \}}}
\DoxyCodeLine{00040 \textcolor{comment}{//      //  \}}}
\DoxyCodeLine{00041 \textcolor{comment}{//      //  else}}
\DoxyCodeLine{00042 \textcolor{comment}{//      //  \{}}
\DoxyCodeLine{00043 }
\DoxyCodeLine{00044 \textcolor{comment}{//      //  \}}}
\DoxyCodeLine{00045 \textcolor{comment}{//      //\}}}
\DoxyCodeLine{00046 }
\DoxyCodeLine{00047 \textcolor{comment}{//      public static Transform GetAttachToTransform(Object attachedTo, int mountId)}}
\DoxyCodeLine{00048 \textcolor{comment}{//      \{}}
\DoxyCodeLine{00049 }
\DoxyCodeLine{00050 \textcolor{comment}{//          if (attachedTo == null)}}
\DoxyCodeLine{00051 \textcolor{comment}{//              return null;}}
\DoxyCodeLine{00052 }
\DoxyCodeLine{00053 \textcolor{comment}{//          /// First see if this is the easiest case... it is a mount already.}}
\DoxyCodeLine{00054 \textcolor{comment}{//          Mount mount = attachedTo as Mount;}}
\DoxyCodeLine{00055 \textcolor{comment}{//          if (!ReferenceEquals(mount, null))}}
\DoxyCodeLine{00056 \textcolor{comment}{//          \{}}
\DoxyCodeLine{00057 \textcolor{comment}{//              return mount.transform;}}
\DoxyCodeLine{00058 \textcolor{comment}{//          \}}}
\DoxyCodeLine{00059 }
\DoxyCodeLine{00060 \textcolor{comment}{//          /// Otherwise try to find a MountLookup}}
\DoxyCodeLine{00061 \textcolor{comment}{//          else}}
\DoxyCodeLine{00062 \textcolor{comment}{//          \{}}
\DoxyCodeLine{00063 \textcolor{comment}{//              var mountsLookup = attachedTo as MountsManager;}}
\DoxyCodeLine{00064 }
\DoxyCodeLine{00065 \textcolor{comment}{//              /// if not a Mounts... try getting Mounts component from the supplied object}}
\DoxyCodeLine{00066 \textcolor{comment}{//              if (!mountsLookup)}}
\DoxyCodeLine{00067 \textcolor{comment}{//              \{}}
\DoxyCodeLine{00068 \textcolor{comment}{//                  Debug.Log("{}Not Found MountLookup"{});}}
\DoxyCodeLine{00069 }
\DoxyCodeLine{00070 \textcolor{comment}{//                  var comp = (attachedTo as Component);}}
\DoxyCodeLine{00071 \textcolor{comment}{//                  if (comp)}}
\DoxyCodeLine{00072 \textcolor{comment}{//                      mountsLookup = comp.GetComponent<MountsManager>();}}
\DoxyCodeLine{00073 }
\DoxyCodeLine{00074 \textcolor{comment}{//                  var gobj = (attachedTo as GameObject);}}
\DoxyCodeLine{00075 \textcolor{comment}{//                  if (gobj)}}
\DoxyCodeLine{00076 \textcolor{comment}{//                      mountsLookup = gobj.GetComponent<MountsManager>();}}
\DoxyCodeLine{00077 \textcolor{comment}{//              \}}}
\DoxyCodeLine{00078 }
\DoxyCodeLine{00079 \textcolor{comment}{//              /// If we found a mounts lookup with a search, try again to get a mount by ID}}
\DoxyCodeLine{00080 \textcolor{comment}{//              if (!ReferenceEquals(mountsLookup, null))}}
\DoxyCodeLine{00081 \textcolor{comment}{//              \{}}
\DoxyCodeLine{00082 \textcolor{comment}{//                  Debug.Log("{}Found MountLookup"{});}}
\DoxyCodeLine{00083 }
\DoxyCodeLine{00084 \textcolor{comment}{//                  bool success = mountsLookup.mountIdLookup.TryGetValue(mountId, out mount);}}
\DoxyCodeLine{00085 }
\DoxyCodeLine{00086 \textcolor{comment}{//                  if (success)}}
\DoxyCodeLine{00087 \textcolor{comment}{//                  \{}}
\DoxyCodeLine{00088 \textcolor{comment}{//                      Debug.Log("{}Found Mount with ID "{} + mount.name);}}
\DoxyCodeLine{00089 \textcolor{comment}{//                      return mount.transform;}}
\DoxyCodeLine{00090 }
\DoxyCodeLine{00091 \textcolor{comment}{//                  \}}}
\DoxyCodeLine{00092 \textcolor{comment}{//                  else}}
\DoxyCodeLine{00093 \textcolor{comment}{//                      return mountsLookup.transform;}}
\DoxyCodeLine{00094 \textcolor{comment}{//              \}}}
\DoxyCodeLine{00095 \textcolor{comment}{//          \}}}
\DoxyCodeLine{00096 }
\DoxyCodeLine{00097             }
\DoxyCodeLine{00098 \textcolor{comment}{//          /// All other cases we are after the transform}}
\DoxyCodeLine{00099 \textcolor{comment}{//          Transform tr = (attachedTo as Transform);}}
\DoxyCodeLine{00100 \textcolor{comment}{//          if (tr)}}
\DoxyCodeLine{00101 \textcolor{comment}{//              return tr;}}
\DoxyCodeLine{00102 }
\DoxyCodeLine{00103 \textcolor{comment}{//          GameObject go = attachedTo as GameObject;}}
\DoxyCodeLine{00104 \textcolor{comment}{//          if (go)}}
\DoxyCodeLine{00105 \textcolor{comment}{//              return go.transform;}}
\DoxyCodeLine{00106 }
\DoxyCodeLine{00107 \textcolor{comment}{//          if (tr)}}
\DoxyCodeLine{00108 \textcolor{comment}{//              return tr;}}
\DoxyCodeLine{00109 }
\DoxyCodeLine{00110 \textcolor{comment}{//          return null;}}
\DoxyCodeLine{00111 \textcolor{comment}{//      \}}}
\DoxyCodeLine{00112 \textcolor{comment}{//  \}}}
\DoxyCodeLine{00113 \textcolor{comment}{//\}}}

\end{DoxyCode}
