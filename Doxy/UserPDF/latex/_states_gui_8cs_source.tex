\doxysection{States\+Gui.\+cs}
\label{_states_gui_8cs_source}\index{C:/\_SSDSPEEDUP/2021/GPS/gps2\_purrpatrator/GPS2\_Purrpatrator/Assets/Photon/PhotonUnityNetworking/UtilityScripts/Debugging/StatesGui.cs@{C:/\_SSDSPEEDUP/2021/GPS/gps2\_purrpatrator/GPS2\_Purrpatrator/Assets/Photon/PhotonUnityNetworking/UtilityScripts/Debugging/StatesGui.cs}}
\textbf{ Go to the documentation of this file.}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001 \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00002 \textcolor{comment}{// <copyright file="{}TabViewManager.cs"{} company="{}Exit Games GmbH"{}>}}
\DoxyCodeLine{00003 \textcolor{comment}{// </copyright>}}
\DoxyCodeLine{00004 \textcolor{comment}{// <summary>}}
\DoxyCodeLine{00005 \textcolor{comment}{//  Output detailed information about Pun Current states, using the old Unity UI framework.}}
\DoxyCodeLine{00006 \textcolor{comment}{// </summary>}}
\DoxyCodeLine{00007 \textcolor{comment}{// <author>developer@exitgames.com</author>}}
\DoxyCodeLine{00008 \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00009 }
\DoxyCodeLine{00010 \textcolor{keyword}{using} UnityEngine;}
\DoxyCodeLine{00011 \textcolor{keyword}{using} Photon.Realtime;}
\DoxyCodeLine{00012 }
\DoxyCodeLine{00013 \textcolor{keyword}{namespace }Photon.Pun.UtilityScripts}
\DoxyCodeLine{00014 \{}
\DoxyCodeLine{00018     \textcolor{keyword}{public} \textcolor{keyword}{class }StatesGui : MonoBehaviour}
\DoxyCodeLine{00019     \{}
\DoxyCodeLine{00020         \textcolor{keyword}{public} Rect GuiOffset = \textcolor{keyword}{new} Rect(250, 0, 300, 300);}
\DoxyCodeLine{00021         \textcolor{keyword}{public} \textcolor{keywordtype}{bool} DontDestroy = \textcolor{keyword}{true};}
\DoxyCodeLine{00022         \textcolor{keyword}{public} \textcolor{keywordtype}{bool} ServerTimestamp;}
\DoxyCodeLine{00023         \textcolor{keyword}{public} \textcolor{keywordtype}{bool} DetailedConnection;}
\DoxyCodeLine{00024         \textcolor{keyword}{public} \textcolor{keywordtype}{bool} Server;}
\DoxyCodeLine{00025         \textcolor{keyword}{public} \textcolor{keywordtype}{bool} AppVersion;}
\DoxyCodeLine{00026         \textcolor{keyword}{public} \textcolor{keywordtype}{bool} UserId;}
\DoxyCodeLine{00027         \textcolor{keyword}{public} \textcolor{keywordtype}{bool} Room;}
\DoxyCodeLine{00028         \textcolor{keyword}{public} \textcolor{keywordtype}{bool} RoomProps;}
\DoxyCodeLine{00029         \textcolor{keyword}{public} \textcolor{keywordtype}{bool} EventsIn;}
\DoxyCodeLine{00030         \textcolor{keyword}{public} \textcolor{keywordtype}{bool} LocalPlayer;}
\DoxyCodeLine{00031         \textcolor{keyword}{public} \textcolor{keywordtype}{bool} PlayerProps;}
\DoxyCodeLine{00032         \textcolor{keyword}{public} \textcolor{keywordtype}{bool} Others;}
\DoxyCodeLine{00033         \textcolor{keyword}{public} \textcolor{keywordtype}{bool} Buttons;}
\DoxyCodeLine{00034         \textcolor{keyword}{public} \textcolor{keywordtype}{bool} ExpectedUsers;}
\DoxyCodeLine{00035 }
\DoxyCodeLine{00036         \textcolor{keyword}{private} Rect GuiRect = \textcolor{keyword}{new} Rect();}
\DoxyCodeLine{00037         \textcolor{keyword}{private} \textcolor{keyword}{static} StatesGui Instance;}
\DoxyCodeLine{00038 }
\DoxyCodeLine{00039         \textcolor{keywordtype}{void} Awake()}
\DoxyCodeLine{00040         \{}
\DoxyCodeLine{00041             \textcolor{keywordflow}{if} (Instance != \textcolor{keyword}{null})}
\DoxyCodeLine{00042             \{}
\DoxyCodeLine{00043                 DestroyImmediate(this.gameObject);}
\DoxyCodeLine{00044                 \textcolor{keywordflow}{return};}
\DoxyCodeLine{00045             \}}
\DoxyCodeLine{00046             \textcolor{keywordflow}{if} (DontDestroy)}
\DoxyCodeLine{00047             \{}
\DoxyCodeLine{00048                 Instance = \textcolor{keyword}{this};}
\DoxyCodeLine{00049                 DontDestroyOnLoad(this.gameObject);}
\DoxyCodeLine{00050             \}}
\DoxyCodeLine{00051 }
\DoxyCodeLine{00052             \textcolor{keywordflow}{if} (EventsIn)}
\DoxyCodeLine{00053             \{}
\DoxyCodeLine{00054                 PhotonNetwork.NetworkingClient.LoadBalancingPeer.TrafficStatsEnabled = \textcolor{keyword}{true};}
\DoxyCodeLine{00055             \}}
\DoxyCodeLine{00056         \}}
\DoxyCodeLine{00057 }
\DoxyCodeLine{00058         \textcolor{keywordtype}{void} OnDisable()}
\DoxyCodeLine{00059         \{}
\DoxyCodeLine{00060             \textcolor{keywordflow}{if} (DontDestroy \&\& Instance == \textcolor{keyword}{this})}
\DoxyCodeLine{00061             \{}
\DoxyCodeLine{00062                 Instance = \textcolor{keyword}{null};}
\DoxyCodeLine{00063             \}}
\DoxyCodeLine{00064 }
\DoxyCodeLine{00065         \}}
\DoxyCodeLine{00066 }
\DoxyCodeLine{00067         \textcolor{keywordtype}{float} native\_width = 800;}
\DoxyCodeLine{00068         \textcolor{keywordtype}{float} native\_height = 480;}
\DoxyCodeLine{00069         \textcolor{keywordtype}{void} OnGUI()}
\DoxyCodeLine{00070         \{}
\DoxyCodeLine{00071             \textcolor{keywordflow}{if} (PhotonNetwork.NetworkingClient == \textcolor{keyword}{null} || PhotonNetwork.NetworkingClient.LoadBalancingPeer == \textcolor{keyword}{null} || PhotonNetwork.NetworkingClient.LoadBalancingPeer.TrafficStatsIncoming == \textcolor{keyword}{null})}
\DoxyCodeLine{00072             \{}
\DoxyCodeLine{00073                 \textcolor{keywordflow}{return};}
\DoxyCodeLine{00074             \}}
\DoxyCodeLine{00075 }
\DoxyCodeLine{00076             \textcolor{comment}{//set up scaling}}
\DoxyCodeLine{00077             \textcolor{keywordtype}{float} rx = Screen.width / native\_width;}
\DoxyCodeLine{00078             \textcolor{keywordtype}{float} ry = Screen.height / native\_height;}
\DoxyCodeLine{00079             GUI.matrix = Matrix4x4.TRS (\textcolor{keyword}{new} Vector3(0, 0, 0), Quaternion.identity, \textcolor{keyword}{new} Vector3 (rx, ry, 1));}
\DoxyCodeLine{00080 }
\DoxyCodeLine{00081             Rect GuiOffsetRuntime = \textcolor{keyword}{new} Rect(this.GuiOffset);}
\DoxyCodeLine{00082 }
\DoxyCodeLine{00083             \textcolor{keywordflow}{if} (GuiOffsetRuntime.x < 0)}
\DoxyCodeLine{00084             \{}
\DoxyCodeLine{00085                 GuiOffsetRuntime.x = Screen.width -\/ GuiOffsetRuntime.width;}
\DoxyCodeLine{00086             \}}
\DoxyCodeLine{00087             GuiRect.xMin = GuiOffsetRuntime.x;}
\DoxyCodeLine{00088             GuiRect.yMin = GuiOffsetRuntime.y;}
\DoxyCodeLine{00089             GuiRect.xMax = GuiOffsetRuntime.x + GuiOffsetRuntime.width;}
\DoxyCodeLine{00090             GuiRect.yMax = GuiOffsetRuntime.y + GuiOffsetRuntime.height;}
\DoxyCodeLine{00091             GUILayout.BeginArea(GuiRect);}
\DoxyCodeLine{00092 }
\DoxyCodeLine{00093             GUILayout.BeginHorizontal();}
\DoxyCodeLine{00094             \textcolor{keywordflow}{if} (this.ServerTimestamp)}
\DoxyCodeLine{00095             \{}
\DoxyCodeLine{00096                 GUILayout.Label((((\textcolor{keywordtype}{double})PhotonNetwork.ServerTimestamp) / 1000d).ToString(\textcolor{stringliteral}{"{}F3"{}}));}
\DoxyCodeLine{00097             \}}
\DoxyCodeLine{00098 }
\DoxyCodeLine{00099             \textcolor{keywordflow}{if} (Server)}
\DoxyCodeLine{00100             \{}
\DoxyCodeLine{00101                 GUILayout.Label(PhotonNetwork.ServerAddress + \textcolor{stringliteral}{"{} "{}} + PhotonNetwork.Server);}
\DoxyCodeLine{00102             \}}
\DoxyCodeLine{00103             \textcolor{keywordflow}{if} (DetailedConnection)}
\DoxyCodeLine{00104             \{}
\DoxyCodeLine{00105                 GUILayout.Label(PhotonNetwork.NetworkClientState.ToString());}
\DoxyCodeLine{00106             \}}
\DoxyCodeLine{00107             \textcolor{keywordflow}{if} (AppVersion)}
\DoxyCodeLine{00108             \{}
\DoxyCodeLine{00109                 GUILayout.Label(PhotonNetwork.NetworkingClient.AppVersion);}
\DoxyCodeLine{00110             \}}
\DoxyCodeLine{00111             GUILayout.EndHorizontal();}
\DoxyCodeLine{00112 }
\DoxyCodeLine{00113             GUILayout.BeginHorizontal();}
\DoxyCodeLine{00114             \textcolor{keywordflow}{if} (UserId)}
\DoxyCodeLine{00115             \{}
\DoxyCodeLine{00116                 GUILayout.Label(\textcolor{stringliteral}{"{}UID: "{}} + ((PhotonNetwork.AuthValues != \textcolor{keyword}{null}) ? PhotonNetwork.AuthValues.UserId : \textcolor{stringliteral}{"{}no UserId"{}}));}
\DoxyCodeLine{00117                 GUILayout.Label(\textcolor{stringliteral}{"{}UserId:"{}} + PhotonNetwork.LocalPlayer.UserId);}
\DoxyCodeLine{00118             \}}
\DoxyCodeLine{00119             GUILayout.EndHorizontal();}
\DoxyCodeLine{00120 }
\DoxyCodeLine{00121             \textcolor{keywordflow}{if} (Room)}
\DoxyCodeLine{00122             \{}
\DoxyCodeLine{00123                 \textcolor{keywordflow}{if} (PhotonNetwork.InRoom)}
\DoxyCodeLine{00124                 \{}
\DoxyCodeLine{00125                     GUILayout.Label(this.RoomProps ? PhotonNetwork.CurrentRoom.ToStringFull() : PhotonNetwork.CurrentRoom.ToString());}
\DoxyCodeLine{00126                 \}}
\DoxyCodeLine{00127                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{00128                 \{}
\DoxyCodeLine{00129                     GUILayout.Label(\textcolor{stringliteral}{"{}not in room"{}});}
\DoxyCodeLine{00130                 \}}
\DoxyCodeLine{00131             \}}
\DoxyCodeLine{00132 }
\DoxyCodeLine{00133             \textcolor{keywordflow}{if} (EventsIn)}
\DoxyCodeLine{00134             \{}
\DoxyCodeLine{00135                 \textcolor{keywordtype}{int} fragments = PhotonNetwork.NetworkingClient.LoadBalancingPeer.TrafficStatsIncoming.FragmentCommandCount;}
\DoxyCodeLine{00136                 GUILayout.Label(\textcolor{stringliteral}{"{}Events Received: "{}}+PhotonNetwork.NetworkingClient.LoadBalancingPeer.TrafficStatsGameLevel.EventCount + \textcolor{stringliteral}{"{} Fragments: "{}}+fragments);}
\DoxyCodeLine{00137             \}}
\DoxyCodeLine{00138 }
\DoxyCodeLine{00139 }
\DoxyCodeLine{00140             \textcolor{keywordflow}{if} (this.LocalPlayer)}
\DoxyCodeLine{00141             \{}
\DoxyCodeLine{00142                 GUILayout.Label(PlayerToString(PhotonNetwork.LocalPlayer));}
\DoxyCodeLine{00143             \}}
\DoxyCodeLine{00144             \textcolor{keywordflow}{if} (Others)}
\DoxyCodeLine{00145             \{}
\DoxyCodeLine{00146                 \textcolor{keywordflow}{foreach} (Player player \textcolor{keywordflow}{in} PhotonNetwork.PlayerListOthers)}
\DoxyCodeLine{00147                 \{}
\DoxyCodeLine{00148                     GUILayout.Label(PlayerToString(player));}
\DoxyCodeLine{00149                 \}}
\DoxyCodeLine{00150             \}}
\DoxyCodeLine{00151             \textcolor{keywordflow}{if} (ExpectedUsers)}
\DoxyCodeLine{00152             \{}
\DoxyCodeLine{00153                 \textcolor{keywordflow}{if} (PhotonNetwork.InRoom)}
\DoxyCodeLine{00154                 \{}
\DoxyCodeLine{00155                     \textcolor{keywordtype}{int} countExpected = (PhotonNetwork.CurrentRoom.ExpectedUsers != \textcolor{keyword}{null}) ? PhotonNetwork.CurrentRoom.ExpectedUsers.Length : 0;}
\DoxyCodeLine{00156 }
\DoxyCodeLine{00157                     GUILayout.Label(\textcolor{stringliteral}{"{}Expected: "{}} + countExpected + \textcolor{stringliteral}{"{} "{}} +}
\DoxyCodeLine{00158                                    ((PhotonNetwork.CurrentRoom.ExpectedUsers != \textcolor{keyword}{null}) ? \textcolor{keywordtype}{string}.Join(\textcolor{stringliteral}{"{},"{}}, PhotonNetwork.CurrentRoom.ExpectedUsers) : \textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{00159                                     );}
\DoxyCodeLine{00160 }
\DoxyCodeLine{00161                 \}}
\DoxyCodeLine{00162             \}}
\DoxyCodeLine{00163 }
\DoxyCodeLine{00164 }
\DoxyCodeLine{00165             \textcolor{keywordflow}{if} (Buttons)}
\DoxyCodeLine{00166             \{}
\DoxyCodeLine{00167                 \textcolor{keywordflow}{if} (!PhotonNetwork.IsConnected \&\& GUILayout.Button(\textcolor{stringliteral}{"{}Connect"{}}))}
\DoxyCodeLine{00168                 \{}
\DoxyCodeLine{00169                     PhotonNetwork.ConnectUsingSettings();}
\DoxyCodeLine{00170                 \}}
\DoxyCodeLine{00171                 GUILayout.BeginHorizontal();}
\DoxyCodeLine{00172                 \textcolor{keywordflow}{if} (PhotonNetwork.IsConnected \&\& GUILayout.Button(\textcolor{stringliteral}{"{}Disconnect"{}}))}
\DoxyCodeLine{00173                 \{}
\DoxyCodeLine{00174                     PhotonNetwork.Disconnect();}
\DoxyCodeLine{00175                 \}}
\DoxyCodeLine{00176                 \textcolor{keywordflow}{if} (PhotonNetwork.IsConnected \&\& GUILayout.Button(\textcolor{stringliteral}{"{}Close Socket"{}}))}
\DoxyCodeLine{00177                 \{}
\DoxyCodeLine{00178                     PhotonNetwork.NetworkingClient.LoadBalancingPeer.StopThread();}
\DoxyCodeLine{00179                 \}}
\DoxyCodeLine{00180                 GUILayout.EndHorizontal();}
\DoxyCodeLine{00181                 \textcolor{keywordflow}{if} (PhotonNetwork.IsConnected \&\& PhotonNetwork.InRoom \&\& GUILayout.Button(\textcolor{stringliteral}{"{}Leave"{}}))}
\DoxyCodeLine{00182                 \{}
\DoxyCodeLine{00183                     PhotonNetwork.LeaveRoom();}
\DoxyCodeLine{00184                 \}}
\DoxyCodeLine{00185                 \textcolor{keywordflow}{if} (PhotonNetwork.IsConnected \&\& PhotonNetwork.InRoom \&\& PhotonNetwork.CurrentRoom.PlayerTtl>0 \&\& GUILayout.Button(\textcolor{stringliteral}{"{}Leave(abandon)"{}}))}
\DoxyCodeLine{00186                 \{}
\DoxyCodeLine{00187                     PhotonNetwork.LeaveRoom(\textcolor{keyword}{false});}
\DoxyCodeLine{00188                 \}}
\DoxyCodeLine{00189                 \textcolor{keywordflow}{if} (PhotonNetwork.IsConnected \&\& !PhotonNetwork.InRoom \&\& GUILayout.Button(\textcolor{stringliteral}{"{}Join Random"{}}))}
\DoxyCodeLine{00190                 \{}
\DoxyCodeLine{00191                     PhotonNetwork.JoinRandomRoom();}
\DoxyCodeLine{00192                 \}}
\DoxyCodeLine{00193                 \textcolor{keywordflow}{if} (PhotonNetwork.IsConnected \&\& !PhotonNetwork.InRoom \&\& GUILayout.Button(\textcolor{stringliteral}{"{}Create Room"{}}))}
\DoxyCodeLine{00194                 \{}
\DoxyCodeLine{00195                     PhotonNetwork.CreateRoom(\textcolor{keyword}{null});}
\DoxyCodeLine{00196                 \}}
\DoxyCodeLine{00197             \}}
\DoxyCodeLine{00198 }
\DoxyCodeLine{00199             GUILayout.EndArea();}
\DoxyCodeLine{00200         \}}
\DoxyCodeLine{00201 }
\DoxyCodeLine{00202         \textcolor{keyword}{private} \textcolor{keywordtype}{string} PlayerToString(Player player)}
\DoxyCodeLine{00203         \{}
\DoxyCodeLine{00204             \textcolor{keywordflow}{if} (PhotonNetwork.NetworkingClient == \textcolor{keyword}{null})}
\DoxyCodeLine{00205             \{}
\DoxyCodeLine{00206                 Debug.LogError(\textcolor{stringliteral}{"{}nwp is null"{}});}
\DoxyCodeLine{00207                 \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00208             \}}
\DoxyCodeLine{00209             \textcolor{keywordflow}{return} \textcolor{keywordtype}{string}.Format(\textcolor{stringliteral}{"{}\#\{0:00\} '\{1\}'\{5\} \{4\}\{2\} \{3\} \{6\}"{}}, player.ActorNumber + \textcolor{stringliteral}{"{}/userId:<"{}} + player.UserId + \textcolor{stringliteral}{"{}>"{}}, player.NickName, player.IsMasterClient ? \textcolor{stringliteral}{"{}(master)"{}} : \textcolor{stringliteral}{"{}"{}}, \textcolor{keyword}{this}.PlayerProps ? player.CustomProperties.ToStringFull() : \textcolor{stringliteral}{"{}"{}}, (PhotonNetwork.LocalPlayer.ActorNumber == player.ActorNumber) ? \textcolor{stringliteral}{"{}(you)"{}} : \textcolor{stringliteral}{"{}"{}}, player.UserId, player.IsInactive ? \textcolor{stringliteral}{"{} / Is Inactive"{}} : \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00210         \}}
\DoxyCodeLine{00211     \}}
\DoxyCodeLine{00212 \}}

\end{DoxyCode}
