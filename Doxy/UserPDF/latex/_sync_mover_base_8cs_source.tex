\doxysection{Sync\+Mover\+Base.\+cs}
\label{_sync_mover_base_8cs_source}\index{C:/\_SSDSPEEDUP/2021/GPS/gps2\_purrpatrator/GPS2\_Purrpatrator/Assets/Photon/Simple/Components/SyncMover/SyncMoverBase.cs@{C:/\_SSDSPEEDUP/2021/GPS/gps2\_purrpatrator/GPS2\_Purrpatrator/Assets/Photon/Simple/Components/SyncMover/SyncMoverBase.cs}}
\textbf{ Go to the documentation of this file.}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001 \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00002 \textcolor{comment}{// <copyright>PhotonNetwork Framework for Unity -\/ Copyright (C) 2020 Exit Games GmbH</copyright>}}
\DoxyCodeLine{00003 \textcolor{comment}{// <author>developer@exitgames.com</author>}}
\DoxyCodeLine{00004 \textcolor{comment}{// -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00005 }
\DoxyCodeLine{00006 \textcolor{keyword}{using} UnityEngine;}
\DoxyCodeLine{00007 \textcolor{keyword}{using} System.Collections.Generic;}
\DoxyCodeLine{00008 }
\DoxyCodeLine{00009 \textcolor{preprocessor}{\#if UNITY\_EDITOR}}
\DoxyCodeLine{00010 \textcolor{keyword}{using} UnityEditor;}
\DoxyCodeLine{00011 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00012 }
\DoxyCodeLine{00013 \textcolor{keyword}{namespace }Photon.Pun.Simple}
\DoxyCodeLine{00014 \{}
\DoxyCodeLine{00015     [System.Serializable]}
\DoxyCodeLine{00016     \textcolor{keyword}{public} \textcolor{keyword}{class }TRSDefinitionBase}
\DoxyCodeLine{00017     \{}
\DoxyCodeLine{00018         \textcolor{keyword}{public} \textcolor{keywordtype}{bool} local = \textcolor{keyword}{true};}
\DoxyCodeLine{00019     \}}
\DoxyCodeLine{00020 }
\DoxyCodeLine{00021     [System.Serializable]}
\DoxyCodeLine{00022     \textcolor{keyword}{public} \textcolor{keyword}{abstract} \textcolor{keyword}{class }SyncMoverBase<TTRSDef, TFrame> : SyncObject<TFrame> }
\DoxyCodeLine{00023         , ITransformController}
\DoxyCodeLine{00024         , IOnPreSimulate}
\DoxyCodeLine{00025         , IOnPreUpdate}
\DoxyCodeLine{00026         \textcolor{comment}{//, ITransformController}}
\DoxyCodeLine{00027         where TTRSDef : TRSDefinitionBase, new()}
\DoxyCodeLine{00028         where TFrame : FrameBase, new()}
\DoxyCodeLine{00029     \{}
\DoxyCodeLine{00030         \textcolor{keyword}{public} \textcolor{keyword}{enum} MovementRelation \{ Absolute, Relative \}}
\DoxyCodeLine{00031         \textcolor{comment}{//public enum AxisMask \{ None = 0, X = 1, Y = 2, XY = 3, Z = 4, XZ = 5, YZ = 6, XYZ = 7 \}}}
\DoxyCodeLine{00032 }
\DoxyCodeLine{00033 \textcolor{preprocessor}{        \#region Inspector}}
\DoxyCodeLine{00034 }
\DoxyCodeLine{00035         [HideInInspector] \textcolor{keyword}{public} TTRSDef posDef = \textcolor{keyword}{new} TTRSDef();}
\DoxyCodeLine{00036         [HideInInspector] \textcolor{keyword}{public} TTRSDef rotDef = \textcolor{keyword}{new} TTRSDef();}
\DoxyCodeLine{00037         [HideInInspector] \textcolor{keyword}{public} TTRSDef sclDef = \textcolor{keyword}{new} TTRSDef();}
\DoxyCodeLine{00038 }
\DoxyCodeLine{00039 \textcolor{preprocessor}{        \#endregion}}
\DoxyCodeLine{00040 }
\DoxyCodeLine{00041 \textcolor{preprocessor}{        \#region Interface Requirements}}
\DoxyCodeLine{00042 }
\DoxyCodeLine{00043         }
\DoxyCodeLine{00044 }
\DoxyCodeLine{00046         \textcolor{keyword}{public} \textcolor{keyword}{virtual} \textcolor{keywordtype}{bool} HandlesInterpolation \{ \textcolor{keyword}{get} \{ \textcolor{keywordflow}{return} \textcolor{keyword}{true}; \} \}}
\DoxyCodeLine{00047         \textcolor{keyword}{public} \textcolor{keyword}{virtual} \textcolor{keywordtype}{bool} HandlesExtrapolation \{ \textcolor{keyword}{get} \{ \textcolor{keywordflow}{return} \textcolor{keyword}{true}; \} \}}
\DoxyCodeLine{00048 }
\DoxyCodeLine{00049 \textcolor{preprocessor}{\#if UNITY\_EDITOR}}
\DoxyCodeLine{00051         \textcolor{keyword}{public} \textcolor{keyword}{override} \textcolor{keywordtype}{bool} AutoAddNetObj \{ \textcolor{keyword}{get} \{ \textcolor{keywordflow}{return} \textcolor{keyword}{false}; \} \}}
\DoxyCodeLine{00052 }
\DoxyCodeLine{00053         \textcolor{keyword}{public} \textcolor{keyword}{virtual} \textcolor{keywordtype}{bool} AutoSync}
\DoxyCodeLine{00054         \{}
\DoxyCodeLine{00055             \textcolor{keyword}{get} \{ \textcolor{keywordflow}{return} \textcolor{keyword}{false}; \}}
\DoxyCodeLine{00056         \}}
\DoxyCodeLine{00057 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00058 \textcolor{preprocessor}{        \#endregion}}
\DoxyCodeLine{00059 }
\DoxyCodeLine{00060 \textcolor{preprocessor}{\#if UNITY\_EDITOR}}
\DoxyCodeLine{00061         \textcolor{keyword}{protected} \textcolor{keyword}{static} List<ITransformController> foundTransformControllers = \textcolor{keyword}{new} List<ITransformController>();}
\DoxyCodeLine{00062 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00063 }
\DoxyCodeLine{00064 }
\DoxyCodeLine{00065         \textcolor{comment}{// Cached items}}
\DoxyCodeLine{00066         \textcolor{keyword}{protected} Rigidbody rb;}
\DoxyCodeLine{00067         \textcolor{keyword}{protected} Rigidbody2D rb2d;}
\DoxyCodeLine{00068         [System.NonSerialized]}
\DoxyCodeLine{00069         \textcolor{keyword}{public} SyncTransform syncTransform;}
\DoxyCodeLine{00070 }
\DoxyCodeLine{00071 \textcolor{preprocessor}{        \#region Startup/Shutdown}}
\DoxyCodeLine{00072 }
\DoxyCodeLine{00073         \textcolor{keyword}{public} \textcolor{keyword}{override} \textcolor{keywordtype}{void} OnAwakeInitialize(\textcolor{keywordtype}{bool} isNetObject)}
\DoxyCodeLine{00074         \{}
\DoxyCodeLine{00077             \textcolor{keywordflow}{if} (!isNetObject)}
\DoxyCodeLine{00078             \{}
\DoxyCodeLine{00079                 NetMasterCallbacks.onPreSimulates.Add(\textcolor{keyword}{this});}
\DoxyCodeLine{00080                 NetMasterCallbacks.onPreUpdates.Add(\textcolor{keyword}{this});}
\DoxyCodeLine{00081             \}}
\DoxyCodeLine{00082 }
\DoxyCodeLine{00083             rb = GetComponent<Rigidbody>();}
\DoxyCodeLine{00084             rb2d = GetComponent<Rigidbody2D>();}
\DoxyCodeLine{00085 }
\DoxyCodeLine{00087             \textcolor{keywordflow}{if} ((rb \&\& !rb.isKinematic) || (rb2d \&\& !rb2d.isKinematic))}
\DoxyCodeLine{00088             \{}
\DoxyCodeLine{00089                 Debug.LogWarning(GetType().Name + \textcolor{stringliteral}{"{} doesn't work with non-\/kinematic rigidbodies. Setting to kinematic."{}});}
\DoxyCodeLine{00090                 \textcolor{keywordflow}{if} (rb)}
\DoxyCodeLine{00091                     rb.isKinematic = \textcolor{keyword}{true};}
\DoxyCodeLine{00092                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{00093                     rb2d.isKinematic = \textcolor{keyword}{true};}
\DoxyCodeLine{00094             \}}
\DoxyCodeLine{00095 }
\DoxyCodeLine{00096             syncTransform = GetComponent<SyncTransform>();}
\DoxyCodeLine{00097 }
\DoxyCodeLine{00098             Recalculate();}
\DoxyCodeLine{00099         \}}
\DoxyCodeLine{00100 }
\DoxyCodeLine{00101         \textcolor{keyword}{public} \textcolor{keyword}{override} \textcolor{keywordtype}{void} OnStartInitialize(\textcolor{keywordtype}{bool} isNetObject)}
\DoxyCodeLine{00102         \{}
\DoxyCodeLine{00103             InitializeTRS(posDef, TRS.Position);}
\DoxyCodeLine{00104             InitializeTRS(rotDef, TRS.Rotation);}
\DoxyCodeLine{00105             InitializeTRS(sclDef, TRS.Scale);}
\DoxyCodeLine{00106         \}}
\DoxyCodeLine{00107 }
\DoxyCodeLine{00108 }
\DoxyCodeLine{00110         \textcolor{keyword}{private} \textcolor{keywordtype}{void} OnDestroy()}
\DoxyCodeLine{00111         \{}
\DoxyCodeLine{00112             \textcolor{keywordflow}{if} (!netObj)}
\DoxyCodeLine{00113             \{}
\DoxyCodeLine{00114                 NetMasterCallbacks.onPreSimulates.Remove(\textcolor{keyword}{this});}
\DoxyCodeLine{00115                 NetMasterCallbacks.onPreUpdates.Remove(\textcolor{keyword}{this});}
\DoxyCodeLine{00116             \}}
\DoxyCodeLine{00117         \}}
\DoxyCodeLine{00118 }
\DoxyCodeLine{00119         \textcolor{keyword}{public} \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} Recalculate()}
\DoxyCodeLine{00120         \{}
\DoxyCodeLine{00121 }
\DoxyCodeLine{00122         \}}
\DoxyCodeLine{00123 }
\DoxyCodeLine{00124         \textcolor{keyword}{protected} \textcolor{keyword}{abstract} \textcolor{keywordtype}{void} InitializeTRS(TTRSDef def, TRS type);}
\DoxyCodeLine{00125 }
\DoxyCodeLine{00126         \textcolor{keyword}{public} \textcolor{keyword}{abstract} \textcolor{keywordtype}{void} OnPreSimulate(\textcolor{keywordtype}{int} frameId, \textcolor{keywordtype}{int} subFrameId);}
\DoxyCodeLine{00127         \textcolor{keyword}{public} \textcolor{keyword}{abstract} \textcolor{keywordtype}{void} OnPreUpdate();}
\DoxyCodeLine{00128 }
\DoxyCodeLine{00129 \textcolor{preprocessor}{        \#endregion}}
\DoxyCodeLine{00130 }
\DoxyCodeLine{00131     \}}
\DoxyCodeLine{00132 }
\DoxyCodeLine{00133 \textcolor{preprocessor}{\#if UNITY\_EDITOR}}
\DoxyCodeLine{00134 }
\DoxyCodeLine{00135     \textcolor{comment}{//[CustomEditor(typeof(SyncMoverBase<>))]}}
\DoxyCodeLine{00136     [CanEditMultipleObjects]}
\DoxyCodeLine{00137     \textcolor{keyword}{public} \textcolor{keyword}{abstract} \textcolor{keyword}{class }SyncMoverBaseEditor : SyncObjectEditor \textcolor{comment}{// HeaderEditorBase}}
\DoxyCodeLine{00138     \{}
\DoxyCodeLine{00139 }
\DoxyCodeLine{00140         \textcolor{keyword}{protected} SerializedProperty posDef, rotDef, sclDef;}
\DoxyCodeLine{00141 }
\DoxyCodeLine{00142         \textcolor{keyword}{protected} \textcolor{keyword}{const} \textcolor{keywordtype}{float} AXIS\_LAB\_WID = 14f;}
\DoxyCodeLine{00143         \textcolor{keyword}{protected} \textcolor{keyword}{const} \textcolor{keywordtype}{float} RANGE\_LABEL\_WIDTH = 48;}
\DoxyCodeLine{00144 }
\DoxyCodeLine{00145         \textcolor{keyword}{public} \textcolor{keyword}{override} \textcolor{keywordtype}{void} OnEnable()}
\DoxyCodeLine{00146         \{}
\DoxyCodeLine{00147             base.OnEnable();}
\DoxyCodeLine{00148 }
\DoxyCodeLine{00149             posDef = serializedObject.FindProperty(\textcolor{stringliteral}{"{}posDef"{}});}
\DoxyCodeLine{00150             rotDef = serializedObject.FindProperty(\textcolor{stringliteral}{"{}rotDef"{}});}
\DoxyCodeLine{00151             sclDef = serializedObject.FindProperty(\textcolor{stringliteral}{"{}sclDef"{}});}
\DoxyCodeLine{00152         \}}
\DoxyCodeLine{00153 }
\DoxyCodeLine{00154         \textcolor{keyword}{protected} \textcolor{keyword}{override} \textcolor{keywordtype}{string} TextTexturePath \{ \textcolor{keyword}{get} \{ \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}Header/SyncMoverText"{}}; \} \}}
\DoxyCodeLine{00155         }
\DoxyCodeLine{00156         \textcolor{comment}{//public override void OnInspectorGUI()}}
\DoxyCodeLine{00157         \textcolor{comment}{//\{}}
\DoxyCodeLine{00158         \textcolor{comment}{//  base.OnInspectorGUI();}}
\DoxyCodeLine{00159 }
\DoxyCodeLine{00160         \textcolor{comment}{//  EditorGUILayout.LabelField("{}TEST"{});}}
\DoxyCodeLine{00161         \textcolor{comment}{//  EditorGUILayout.BeginVertical("{}HelpBox"{});}}
\DoxyCodeLine{00162         \textcolor{comment}{//  var sp = serializedObject.FindProperty("{}posDef"{}).FindPropertyRelative("{}local"{});}}
\DoxyCodeLine{00163         \textcolor{comment}{//  while (!sp.hasVisibleChildren)}}
\DoxyCodeLine{00164         \textcolor{comment}{//  \{}}
\DoxyCodeLine{00165         \textcolor{comment}{//      EditorGUILayout.PropertyField(sp);}}
\DoxyCodeLine{00166         \textcolor{comment}{//      if (!sp.NextVisible(false))}}
\DoxyCodeLine{00167         \textcolor{comment}{//          break;}}
\DoxyCodeLine{00168         \textcolor{comment}{//  \}}}
\DoxyCodeLine{00169         \textcolor{comment}{//  EditorGUILayout.EndVertical();}}
\DoxyCodeLine{00170         \textcolor{comment}{//\}}}
\DoxyCodeLine{00171 }
\DoxyCodeLine{00172         \textcolor{comment}{//protected abstract void DrawTRSs();}}
\DoxyCodeLine{00173 }
\DoxyCodeLine{00174         \textcolor{keyword}{protected} \textcolor{keywordtype}{void} DrawTRSElementHeader()}
\DoxyCodeLine{00175         \{}
\DoxyCodeLine{00176             EditorGUILayout.BeginHorizontal();}
\DoxyCodeLine{00177             EditorGUILayout.LabelField(\textcolor{stringliteral}{"{}"{}}, GUILayout.MaxWidth(RANGE\_LABEL\_WIDTH + 8));}
\DoxyCodeLine{00178             EditorGUILayout.LabelField(\textcolor{stringliteral}{"{} Pos"{}}, GUILayout.MinWidth(16));}
\DoxyCodeLine{00179             EditorGUILayout.LabelField(\textcolor{stringliteral}{"{} Rot"{}}, GUILayout.MinWidth(16));}
\DoxyCodeLine{00180             EditorGUILayout.LabelField(\textcolor{stringliteral}{"{} Scl"{}}, GUILayout.MinWidth(16));}
\DoxyCodeLine{00181             EditorGUILayout.EndHorizontal();}
\DoxyCodeLine{00182         \}}
\DoxyCodeLine{00183         \textcolor{keyword}{protected} \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} DrawTRSElementRow(GUIContent label, \textcolor{keywordtype}{string} property)}
\DoxyCodeLine{00184         \{}
\DoxyCodeLine{00185             EditorGUILayout.BeginHorizontal();}
\DoxyCodeLine{00186             EditorGUILayout.LabelField(label, GUILayout.MaxWidth(RANGE\_LABEL\_WIDTH + 8));}
\DoxyCodeLine{00187             EditorGUILayout.PropertyField(posDef.FindPropertyRelative(property), GUIContent.none, GUILayout.MinWidth(16));}
\DoxyCodeLine{00188             EditorGUILayout.PropertyField(rotDef.FindPropertyRelative(property), GUIContent.none, GUILayout.MinWidth(16));}
\DoxyCodeLine{00189             EditorGUILayout.PropertyField(sclDef.FindPropertyRelative(property), GUIContent.none, GUILayout.MinWidth(16));}
\DoxyCodeLine{00190             EditorGUILayout.EndHorizontal();}
\DoxyCodeLine{00191         \}}
\DoxyCodeLine{00192 }
\DoxyCodeLine{00193     \}}
\DoxyCodeLine{00194 }
\DoxyCodeLine{00195 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00196 \}}
\DoxyCodeLine{00197 }

\end{DoxyCode}
