\doxysection{Update\+Checker.\+cs}
\label{_update_checker_8cs_source}\index{C:/\_SSDSPEEDUP/2021/GPS/gps2\_purrpatrator/GPS2\_Purrpatrator/Assets/ParrelSync/ParrelSync/Editor/UpdateChecker.cs@{C:/\_SSDSPEEDUP/2021/GPS/gps2\_purrpatrator/GPS2\_Purrpatrator/Assets/ParrelSync/ParrelSync/Editor/UpdateChecker.cs}}
\textbf{ Go to the documentation of this file.}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001 \textcolor{keyword}{using} System;}
\DoxyCodeLine{00002 \textcolor{keyword}{using} UnityEditor;}
\DoxyCodeLine{00003 \textcolor{keyword}{using} UnityEngine;}
\DoxyCodeLine{00004 \textcolor{keyword}{namespace }ParrelSync.Update}
\DoxyCodeLine{00005 \{}
\DoxyCodeLine{00009     \textcolor{keyword}{public} \textcolor{keyword}{class }UpdateChecker}
\DoxyCodeLine{00010     \{}
\DoxyCodeLine{00011         \textcolor{comment}{//const string LocalVersionFilePath = "{}Assets/ParrelSync/VERSION.txt"{};}}
\DoxyCodeLine{00012         \textcolor{keyword}{public} \textcolor{keyword}{const} \textcolor{keywordtype}{string} LocalVersion = \textcolor{stringliteral}{"{}1.5.1"{}};}
\DoxyCodeLine{00013         [MenuItem(\textcolor{stringliteral}{"{}ParrelSync/Check for update"{}}, priority = 20)]}
\DoxyCodeLine{00014         \textcolor{keyword}{static} \textcolor{keywordtype}{void} CheckForUpdate()}
\DoxyCodeLine{00015         \{}
\DoxyCodeLine{00016             \textcolor{keyword}{using} (System.Net.WebClient client = \textcolor{keyword}{new} System.Net.WebClient())}
\DoxyCodeLine{00017             \{}
\DoxyCodeLine{00018                 \textcolor{keywordflow}{try}}
\DoxyCodeLine{00019                 \{}
\DoxyCodeLine{00020                     \textcolor{comment}{//This won't work with UPM packages}}
\DoxyCodeLine{00021                     \textcolor{comment}{//string localVersionText = AssetDatabase.LoadAssetAtPath<TextAsset>(LocalVersionFilePath).text;}}
\DoxyCodeLine{00022 }
\DoxyCodeLine{00023                     \textcolor{keywordtype}{string} localVersionText = LocalVersion;}
\DoxyCodeLine{00024                     Debug.Log(\textcolor{stringliteral}{"{}Local version text : "{}} + LocalVersion);}
\DoxyCodeLine{00025 }
\DoxyCodeLine{00026                     \textcolor{keywordtype}{string} latesteVersionText = client.DownloadString(ExternalLinks.RemoteVersionURL);}
\DoxyCodeLine{00027                     Debug.Log(\textcolor{stringliteral}{"{}latest version text got: "{}} + latesteVersionText);}
\DoxyCodeLine{00028                     \textcolor{keywordtype}{string} messageBody = \textcolor{stringliteral}{"{}Current Version: "{}} + localVersionText +\textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{00029                                          +\textcolor{stringliteral}{"{}Latest Version: "{}} + latesteVersionText + \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00030                     var latestVersion = \textcolor{keyword}{new} Version(latesteVersionText);}
\DoxyCodeLine{00031                     var localVersion = \textcolor{keyword}{new} Version(localVersionText);}
\DoxyCodeLine{00032 }
\DoxyCodeLine{00033                     \textcolor{keywordflow}{if} (latestVersion > localVersion)}
\DoxyCodeLine{00034                     \{}
\DoxyCodeLine{00035                         Debug.Log(\textcolor{stringliteral}{"{}There's a newer version"{}});}
\DoxyCodeLine{00036                         messageBody += \textcolor{stringliteral}{"{}There's a newer version available"{}};}
\DoxyCodeLine{00037                         \textcolor{keywordflow}{if}(EditorUtility.DisplayDialog(\textcolor{stringliteral}{"{}Check for update."{}}, messageBody, \textcolor{stringliteral}{"{}Get latest release"{}}, \textcolor{stringliteral}{"{}Close"{}}))}
\DoxyCodeLine{00038                         \{}
\DoxyCodeLine{00039                             Application.OpenURL(ExternalLinks.Releases);}
\DoxyCodeLine{00040                         \}}
\DoxyCodeLine{00041                     \}}
\DoxyCodeLine{00042                     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00043                     \{}
\DoxyCodeLine{00044                         Debug.Log(\textcolor{stringliteral}{"{}Current version is up-\/to-\/date."{}});}
\DoxyCodeLine{00045                         messageBody += \textcolor{stringliteral}{"{}Current version is up-\/to-\/date."{}};}
\DoxyCodeLine{00046                         EditorUtility.DisplayDialog(\textcolor{stringliteral}{"{}Check for update."{}}, messageBody,\textcolor{stringliteral}{"{}OK"{}});}
\DoxyCodeLine{00047                     \}}
\DoxyCodeLine{00048                     }
\DoxyCodeLine{00049                 \}}
\DoxyCodeLine{00050                 \textcolor{keywordflow}{catch} (Exception exp)}
\DoxyCodeLine{00051                 \{}
\DoxyCodeLine{00052                     Debug.LogError(\textcolor{stringliteral}{"{}Error with checking update. Exception: "{}} + exp);}
\DoxyCodeLine{00053                     EditorUtility.DisplayDialog(\textcolor{stringliteral}{"{}Update Error"{}},\textcolor{stringliteral}{"{}Error with checking update. \(\backslash\)nSee console for more details."{}},}
\DoxyCodeLine{00054                      \textcolor{stringliteral}{"{}OK"{}}}
\DoxyCodeLine{00055                     );}
\DoxyCodeLine{00056                 \}}
\DoxyCodeLine{00057             \}}
\DoxyCodeLine{00058         \}}
\DoxyCodeLine{00059     \}}
\DoxyCodeLine{00060 \}}

\end{DoxyCode}
